{"version":3,"sources":["../node_modules/browser-pack/_prelude.js","src/index.ts","src/page/SettingsPage.ts","src/page/SettingsPageRoutes.ts","src/page/index.ts","src/service/SettingsConfig.ts","src/service/SettingsPageSelectedTab.ts","src/service/SettingsService.ts","src/service/SettingsStateConfig.ts","src/service/SettingsTab.ts","src/service/index.ts","temp/pip-webui-settings-html.js"],"names":[],"mappings":"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","file":"pip-webui-settings.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import './service';\r\nimport './page';\r\n\r\nangular.module('pipSettings', [\r\n    'pipSettings.Service',\r\n    'pipSettings.Page'\r\n]);\r\n\r\nexport * from './service';","import { ISettingsService } from '../service/ISettingsService';\r\nimport { SettingsTab } from '../service/SettingsTab';\r\nimport { SettingsPageSelectedTab } from '../service/SettingsPageSelectedTab';\r\n\r\ninterface ISettingsPageController {\r\n    tabs: SettingsTab[];\r\n    selected: SettingsPageSelectedTab;\r\n    onDropdownSelect: Function;\r\n    onNavigationSelect(state: string): void;\r\n}\r\n\r\nclass SettingsPageController implements ISettingsPageController {\r\n    public tabs: SettingsTab[];\r\n    public selected: SettingsPageSelectedTab;\r\n    public onDropdownSelect: Function;\r\n\r\n    constructor(\r\n        private $state: ng.ui.IStateService,\r\n        pipNavService: pip.nav.INavService,\r\n        pipSettings: ISettingsService,\r\n        $rootScope: ng.IRootScopeService, \r\n        $timeout: angular.ITimeoutService\r\n    ) {\r\n\r\n        this.tabs = _.filter(pipSettings.getTabs(), (tab: SettingsTab) => {\r\n                if (tab.visible === true && (tab.access ? tab.access($rootScope['$user'], tab) : true)) {\r\n                    return tab;\r\n                }\r\n            });\r\n\r\n        this.tabs = _.sortBy(this.tabs, 'index');\r\n\r\n        this.selected = new SettingsPageSelectedTab();\r\n        if (this.$state.current.name !== 'settings') {\r\n            this.initSelect(this.$state.current.name);\r\n        } else if (this.$state.current.name === 'settings' && pipSettings.getDefaultTab()) {\r\n            this.initSelect(pipSettings.getDefaultTab().state);\r\n        } else {\r\n            $timeout(() => {\r\n                if (pipSettings.getDefaultTab()) {\r\n                    this.initSelect(pipSettings.getDefaultTab().state);\r\n                }\r\n                if (!pipSettings.getDefaultTab() && this.tabs.length > 0) {\r\n                     this.initSelect(this.tabs[0].state);\r\n                }\r\n            });\r\n        }\r\n\r\n        pipNavService.icon.showMenu();\r\n        pipNavService.breadcrumb.text = \"Settings\";\r\n        pipNavService.actions.hide();\r\n        pipNavService.appbar.removeShadow();\r\n        \r\n        this.onDropdownSelect = (state) => {\r\n            this.onNavigationSelect(state.state);\r\n        }\r\n    }\r\n\r\n    private initSelect(state: string): void {\r\n        this.selected.tab = _.find(this.tabs, (tab: SettingsTab) => {\r\n            return tab.state === state;\r\n        });\r\n        this.selected.tabIndex = _.indexOf(this.tabs, this.selected.tab);\r\n        this.selected.tabId = state;\r\n        this.$state.go(this.selected.tabId);\r\n    }\r\n\r\n    public onNavigationSelect(state: string): void {\r\n        this.initSelect(state);\r\n\r\n        if (this.selected.tab) {\r\n            this.$state.go(state);\r\n        }\r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipSettings.Page')\r\n    .controller('pipSettingsPageController', SettingsPageController);\r\n","{\r\n    function configureSettingsPageRoutes($stateProvider) {\r\n        $stateProvider\r\n            .state('settings', {\r\n                url: '/settings?party_id',\r\n                auth: true,\r\n                controllerAs: 'vm',\r\n                controller: 'pipSettingsPageController',\r\n                templateUrl: 'page/SettingsPage.html'\r\n            });\r\n\r\n    }\r\n\r\n    angular.module('pipSettings.Page')\r\n        .config(configureSettingsPageRoutes);\r\n}\r\n","angular.module('pipSettings.Page', [\r\n    'ui.router', \r\n    'pipSettings.Service',\r\n    'pipNav', \r\n    'pipSelected',\r\n    'pipTranslate',\r\n    'pipSettings.Templates'\r\n    ]);\r\n\r\n\r\nimport './SettingsPage';\r\nimport './SettingsPageRoutes';","import { SettingsTab } from './SettingsTab';\r\n\r\nexport class SettingsConfig {\r\n    public defaultTab: string;\r\n    public tabs: SettingsTab[] = [];\r\n    public titleText: string = 'SETTINGS_TITLE';\r\n    public titleLogo: boolean = null;\r\n    public isNavIcon: boolean = true;\r\n}\r\n","import { SettingsTab } from './SettingsTab';\r\n\r\nexport class SettingsPageSelectedTab {\r\n    public tab: SettingsTab;\r\n    public tabIndex: number = 0;\r\n    public tabId: string;\r\n}","import { SettingsTab } from './SettingsTab';\r\nimport { SettingsConfig } from './SettingsConfig';\r\nimport { ISettingsService } from './ISettingsService';\r\nimport { ISettingsProvider } from './ISettingsService';\r\n\r\nclass SettingsService implements ISettingsService {\r\n    private _config: SettingsConfig;\r\n\r\n    public constructor(config: SettingsConfig) {\r\n        \"ngInject\";\r\n        this._config = config;\r\n    }\r\n\r\n    private getFullStateName(state: string): string {\r\n        return 'settings.' + state;\r\n    }\r\n\r\n    public setDefaultTab(name: string): void {\r\n        if (!_.find(this._config.tabs, (tab: SettingsTab) => {\r\n            return tab.state === 'settings.' + name;\r\n        })) {\r\n            throw new Error('Tab with state name \"' + name + '\" is not registered');\r\n        }\r\n\r\n        this._config.defaultTab = this.getFullStateName(name);\r\n    }\r\n\r\n    public getDefaultTab(): SettingsTab {\r\n        let defaultTab: SettingsTab;\r\n\r\n        defaultTab = _.find(this._config.tabs, (tab: SettingsTab) => {\r\n            return tab.state === this._config.defaultTab;\r\n        });\r\n        return _.cloneDeep(defaultTab);\r\n    }\r\n\r\n    public showTitleText (newTitleText: string): string {\r\n        if (newTitleText) {\r\n            this._config.titleText = newTitleText;\r\n            this._config.titleLogo = null;\r\n        }\r\n\r\n        return this._config.titleText;\r\n    }\r\n\r\n    public showTitleLogo(newTitleLogo) {\r\n        if (newTitleLogo) {\r\n            this._config.titleLogo = newTitleLogo;\r\n            this._config.titleText = null;\r\n        }\r\n\r\n        return this._config.titleLogo;\r\n    }\r\n\r\n    public showNavIcon(value: boolean): boolean {\r\n        if (value !== null && value !== undefined) {\r\n            this._config.isNavIcon = !!value;\r\n        }\r\n\r\n        return this._config.isNavIcon;\r\n    }\r\n\r\n    public getTabs(): SettingsTab[] {\r\n        return _.cloneDeep(this._config.tabs);\r\n    }\r\n\r\n}\r\n\r\nclass SettingsProvider implements ISettingsProvider {\r\n    private _service: SettingsService;\r\n    private _config: SettingsConfig = new SettingsConfig();\r\n\r\n    constructor(private $stateProvider: ng.ui.IStateProvider) {}\r\n\r\n    public getFullStateName(state: string): string {\r\n        return 'settings.' + state;\r\n    }\r\n\r\n    public getDefaultTab(): SettingsTab {\r\n        let defaultTab: SettingsTab;\r\n\r\n        defaultTab = _.find(this._config.tabs, (tab: SettingsTab) => {\r\n            return tab.state === defaultTab.state;\r\n        });\r\n\r\n        return _.cloneDeep(defaultTab);\r\n    }\r\n\r\n    public addTab(tabObj: SettingsTab): void {\r\n        let existingTab: SettingsTab;\r\n\r\n        this.validateTab(tabObj);\r\n        existingTab = _.find(this._config.tabs, (tab: SettingsTab) => {\r\n            return tab.state === 'settings.' + tabObj.state;\r\n        });\r\n        if (existingTab) {\r\n            throw new Error('Tab with state name \"' + tabObj.state + '\" is already registered');\r\n        }\r\n\r\n        this._config.tabs.push({\r\n            state: this.getFullStateName(tabObj.state),\r\n            title: tabObj.title,\r\n            index: tabObj.index || 100000,\r\n            access: tabObj.access,\r\n            visible: tabObj.visible !== false,\r\n            stateConfig: _.cloneDeep(tabObj.stateConfig)\r\n        });\r\n        this.$stateProvider.state(this.getFullStateName(tabObj.state), tabObj.stateConfig);\r\n\r\n        // if we just added first state and no default state is specified\r\n        if (typeof this._config.defaultTab === 'undefined' && this._config.tabs.length === 1) {\r\n            this.setDefaultTab(tabObj.state);\r\n        }\r\n    }\r\n\r\n    public setDefaultTab(name: string): void {\r\n        // TODO [apidhirnyi] extract expression inside 'if' into variable. It isn't readable now.\r\n        if (!_.find(this._config.tabs, (tab: SettingsTab) => {\r\n            return tab.state === 'settings.' + name;\r\n        })) {\r\n            throw new Error('Tab with state name \"' + name + '\" is not registered');\r\n        }\r\n\r\n        this._config.defaultTab = this.getFullStateName(name);\r\n        //console.log(this.$stateProvider);\r\n        //this.$stateProvider.go(this._config.defaultTab);\r\n            //pipAuthStateProvider.redirect('settings', getFullStateName(name));\r\n    }\r\n\r\n    /**\r\n     * Validates passed tab config object\r\n     * If passed tab is not valid it will throw an error\r\n     */\r\n    private validateTab(tabObj: SettingsTab): void {\r\n        if (!tabObj || !_.isObject(tabObj)) {\r\n            throw new Error('Invalid object');\r\n        }\r\n\r\n        if (tabObj.state === null || tabObj.state === '') {\r\n            throw new Error('Tab should have valid Angular UI router state name');\r\n        }\r\n\r\n        if (tabObj.access && !_.isFunction(tabObj.access)) {\r\n            throw new Error('\"access\" should be a function');\r\n        }\r\n\r\n        if (!tabObj.stateConfig || !_.isObject(tabObj.stateConfig)) {\r\n            throw new Error('Invalid state configuration object');\r\n        }\r\n    }\r\n\r\n    public showTitleText (newTitleText: string): string {\r\n        if (newTitleText) {\r\n            this._config.titleText = newTitleText;\r\n            this._config.titleLogo = null;\r\n        }\r\n\r\n        return this._config.titleText;\r\n    }\r\n\r\n    public showTitleLogo(newTitleLogo) {\r\n        if (newTitleLogo) {\r\n            this._config.titleLogo = newTitleLogo;\r\n            this._config.titleText = null;\r\n        }\r\n\r\n        return this._config.titleLogo;\r\n    }\r\n\r\n    public showNavIcon(value: boolean): boolean {\r\n        if (value !== null && value !== undefined) {\r\n            this._config.isNavIcon = !!value;\r\n        }\r\n\r\n        return this._config.isNavIcon;\r\n    }\r\n\r\n    public $get(): ISettingsService {\r\n        \"ngInject\";\r\n\r\n        if (_.isNull(this._service) || _.isUndefined(this._service)) {\r\n            this._service = new SettingsService(this._config);\r\n        }\r\n        \r\n        return this._service;\r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipSettings.Service')\r\n    .provider('pipSettings', SettingsProvider);\r\n\r\n","export class SettingsStateConfig {\r\n    public url: string;\r\n    public auth: boolean = false;\r\n    public templateUrl?: string;\r\n    public template?: string;\r\n}","import { SettingsStateConfig } from './SettingsStateConfig';\r\n\r\nexport class SettingsTab {\r\n    public state: string;\r\n    public title: string;\r\n    public index: number;\r\n    public access: Function;\r\n    public visible: boolean;\r\n    public stateConfig: SettingsStateConfig;\r\n}\r\n","angular.module('pipSettings.Service', []);\r\n\r\nimport './SettingsConfig';\r\nimport './SettingsPageSelectedTab';\r\nimport './SettingsStateConfig';\r\nimport './SettingsTab';\r\nimport './SettingsService';\r\n\r\nexport * from './SettingsConfig';\r\nexport * from './SettingsPageSelectedTab';\r\nexport * from './SettingsStateConfig';\r\nexport * from './SettingsTab';\r\nexport * from './SettingsService';\r\n","(function(module) {\ntry {\n  module = angular.module('pipSettings.Templates');\n} catch (e) {\n  module = angular.module('pipSettings.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('page/SettingsPage.html',\n    '<md-toolbar class=\"pip-appbar-ext\"></md-toolbar>\\n' +\n    '<pip-document width=\"800\" min-height=\"400\"\\n' +\n    '              class=\"pip-settings\">\\n' +\n    '\\n' +\n    '    <div class=\"pip-menu-container\"\\n' +\n    '         ng-hide=\"vm.manager === false || !vm.tabs || vm.tabs.length < 1\">\\n' +\n    '        <md-list class=\"pip-menu pip-simple-list\"\\n' +\n    '                 pip-selected=\"vm.selected.tabIndex\"\\n' +\n    '                 pip-selected-watch=\"vm.selected.navId\"\\n' +\n    '                 pip-select=\"vm.onNavigationSelect($event.id)\">\\n' +\n    '            <md-list-item class=\"pip-simple-list-item pip-selectable flex\"\\n' +\n    '                          ng-repeat=\"tab in vm.tabs track by tab.state\" ng-if=\"vm.$party.id == vm.$user.id ||\\n' +\n    '                          tab.state == \\'settings.basic_info\\'|| tab.state ==\\'settings.contact_info\\'\\n' +\n    '                          || tab.state ==\\'settings.blacklist\\'\"\\n' +\n    '                          md-ink-ripple\\n' +\n    '                          pip-id=\"{{:: tab.state }}\">\\n' +\n    '                <p>{{::tab.title | translate}}</p>\\n' +\n    '            </md-list-item>\\n' +\n    '        </md-list>\\n' +\n    '\\n' +\n    '        <div class=\"pip-content-container\">\\n' +\n    '            <pip-dropdown pip-actions=\"vm.tabs\"\\n' +\n    '                          pip-dropdown-select=\"vm.onDropdownSelect\"\\n' +\n    '                          pip-active-index=\"vm.selected.tabIndex\"></pip-dropdown>\\n' +\n    '\\n' +\n    '            <div class=\"pip-body tp24-flex layout-column\" ui-view></div>\\n' +\n    '        </div>\\n' +\n    '    </div>\\n' +\n    '    <div class=\"layout-column layout-align-center-center flex\"\\n' +\n    '         ng-show=\"vm.manager === false || !vm.tabs || vm.tabs.length < 1\">\\n' +\n    '        {{::\\'ERROR_400\\' | translate}}\\n' +\n    '    </div>\\n' +\n    '</pip-document>');\n}]);\n})();\n\n//# sourceMappingURL=pip-webui-settings-html.js.map\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvaW5kZXgudHMiLCJzcmMvcGFnZS9TZXR0aW5nc1BhZ2UudHMiLCJzcmMvcGFnZS9TZXR0aW5nc1BhZ2VSb3V0ZXMudHMiLCJzcmMvcGFnZS9pbmRleC50cyIsInNyYy9zZXJ2aWNlL1NldHRpbmdzQ29uZmlnLnRzIiwic3JjL3NlcnZpY2UvU2V0dGluZ3NQYWdlU2VsZWN0ZWRUYWIudHMiLCJzcmMvc2VydmljZS9TZXR0aW5nc1NlcnZpY2UudHMiLCJzcmMvc2VydmljZS9TZXR0aW5nc1N0YXRlQ29uZmlnLnRzIiwic3JjL3NlcnZpY2UvU2V0dGluZ3NUYWIudHMiLCJzcmMvc2VydmljZS9pbmRleC50cyIsInRlbXAvcGlwLXdlYnVpLXNldHRpbmdzLWh0bWwuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7OztBQ0FBLHFCQUFtQjtBQUNuQixrQkFBZ0I7QUFFaEIsT0FBTyxDQUFDLE1BQU0sQ0FBQyxhQUFhLEVBQUU7SUFDMUIscUJBQXFCO0lBQ3JCLGtCQUFrQjtDQUNyQixDQUFDLENBQUM7QUFFSCwrQkFBMEI7Ozs7QUNOMUIsOEVBQTZFO0FBUzdFO0lBS0ksZ0NBQ1ksTUFBMkIsRUFDbkMsYUFBa0MsRUFDbEMsV0FBNkIsRUFDN0IsVUFBZ0MsRUFDaEMsUUFBaUM7UUFMckMsaUJBd0NDO1FBdkNXLFdBQU0sR0FBTixNQUFNLENBQXFCO1FBT25DLElBQUksQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsT0FBTyxFQUFFLEVBQUUsVUFBQyxHQUFnQjtZQUNyRCxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsT0FBTyxLQUFLLElBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLEVBQUUsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMs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LG1DQUE4Qjs7QUNYOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiaW1wb3J0ICcuL3NlcnZpY2UnO1xyXG5pbXBvcnQgJy4vcGFnZSc7XHJcblxyXG5hbmd1bGFyLm1vZHVsZSgncGlwU2V0dGluZ3MnLCBbXHJcbiAgICAncGlwU2V0dGluZ3MuU2VydmljZScsXHJcbiAgICAncGlwU2V0dGluZ3MuUGFnZSdcclxuXSk7XHJcblxyXG5leHBvcnQgKiBmcm9tICcuL3NlcnZpY2UnOyIsImltcG9ydCB7IElTZXR0aW5nc1NlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlL0lTZXR0aW5nc1NlcnZpY2UnO1xyXG5pbXBvcnQgeyBTZXR0aW5nc1RhYiB9IGZyb20gJy4uL3NlcnZpY2UvU2V0dGluZ3NUYWInO1xyXG5pbXBvcnQgeyBTZXR0aW5nc1BhZ2VTZWxlY3RlZFRhYiB9IGZyb20gJy4uL3NlcnZpY2UvU2V0dGluZ3NQYWdlU2VsZWN0ZWRUYWInO1xyXG5cclxuaW50ZXJmYWNlIElTZXR0aW5nc1BhZ2VDb250cm9sbGVyIHtcclxuICAgIHRhYnM6IFNldHRpbmdzVGFiW107XHJcbiAgICBzZWxlY3RlZDogU2V0dGluZ3NQYWdlU2VsZWN0ZWRUYWI7XHJcbiAgICBvbkRyb3Bkb3duU2VsZWN0OiBGdW5jdGlvbjtcclxuICAgIG9uTmF2aWdhdGlvblNlbGVjdChzdGF0ZTogc3RyaW5nKTogdm9pZDtcclxufVxyXG5cclxuY2xhc3MgU2V0dGluZ3NQYWdlQ29udHJvbGxlciBpbXBsZW1lbnRzIElTZXR0aW5nc1BhZ2VDb250cm9sbGVyIHtcclxuICAgIHB1YmxpYyB0YWJzOiBTZXR0aW5nc1RhYltdO1xyXG4gICAgcHVibGljIHNlbGVjdGVkOiBTZXR0aW5nc1BhZ2VTZWxlY3RlZFRhYjtcclxuICAgIHB1YmxpYyBvbkRyb3Bkb3duU2VsZWN0OiBGdW5jdGlvbjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwcml2YXRlICRzdGF0ZTogbmcudWkuSVN0YXRlU2VydmljZSxcclxuICAgICAgICBwaXBOYXZTZXJ2aWNlOiBwaXAubmF2LklOYXZTZXJ2aWNlLFxyXG4gICAgICAgIHBpcFNldHRpbmdzOiBJU2V0dGluZ3NTZXJ2aWNlLFxyXG4gICAgICAgICRyb290U2NvcGU6IG5nLklSb290U2NvcGVTZXJ2aWNlLCBcclxuICAgICAgICAkdGltZW91dDogYW5ndWxhci5JVGltZW91dFNlcnZpY2VcclxuICAgICkge1xyXG5cclxuICAgICAgICB0aGlzLnRhYnMgPSBfLmZpbHRlcihwaXBTZXR0aW5ncy5nZXRUYWJzKCksICh0YWI6IFNldHRpbmdzVGFiKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGFiLnZpc2libGUgPT09IHRydWUgJiYgKHRhYi5hY2Nlc3MgPyB0YWIuYWNjZXNzKCRyb290U2NvcGVbJyR1c2VyJ10sIHRhYikgOiB0cnVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0YWI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnRhYnMgPSBfLnNvcnRCeSh0aGlzLnRhYnMsICdpbmRleCcpO1xyXG5cclxuICAgICAgICB0aGlzLnNlbGVjdGVkID0gbmV3IFNldHRpbmdzUGFnZVNlbGVjdGVkVGFiKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuJHN0YXRlLmN1cnJlbnQubmFtZSAhPT0gJ3NldHRpbmdzJykge1xyXG4gICAgICAgICAgICB0aGlzLmluaXRTZWxlY3QodGhpcy4kc3RhdGUuY3VycmVudC5uYW1lKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuJHN0YXRlLmN1cnJlbnQubmFtZSA9PT0gJ3NldHRpbmdzJyAmJiBwaXBTZXR0aW5ncy5nZXREZWZhdWx0VGFiKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5pbml0U2VsZWN0KHBpcFNldHRpbmdzLmdldERlZmF1bHRUYWIoKS5zdGF0ZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJHRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHBpcFNldHRpbmdzLmdldERlZmF1bHRUYWIoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdFNlbGVjdChwaXBTZXR0aW5ncy5nZXREZWZhdWx0VGFiKCkuc3RhdGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCFwaXBTZXR0aW5ncy5nZXREZWZhdWx0VGFiKCkgJiYgdGhpcy50YWJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0U2VsZWN0KHRoaXMudGFic1swXS5zdGF0ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcGlwTmF2U2VydmljZS5pY29uLnNob3dNZW51KCk7XHJcbiAgICAgICAgcGlwTmF2U2VydmljZS5icmVhZGNydW1iLnRleHQgPSBcIlNldHRpbmdzXCI7XHJcbiAgICAgICAgcGlwTmF2U2VydmljZS5hY3Rpb25zLmhpZGUoKTtcclxuICAgICAgICBwaXBOYXZTZXJ2aWNlLmFwcGJhci5yZW1vdmVTaGFkb3coKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLm9uRHJvcGRvd25TZWxlY3QgPSAoc3RhdGUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5vbk5hdmlnYXRpb25TZWxlY3Qoc3RhdGUuc3RhdGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGluaXRTZWxlY3Qoc3RhdGU6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWQudGFiID0gXy5maW5kKHRoaXMudGFicywgKHRhYjogU2V0dGluZ3NUYWIpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRhYi5zdGF0ZSA9PT0gc3RhdGU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZC50YWJJbmRleCA9IF8uaW5kZXhPZih0aGlzLnRhYnMsIHRoaXMuc2VsZWN0ZWQudGFiKTtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkLnRhYklkID0gc3RhdGU7XHJcbiAgICAgICAgdGhpcy4kc3RhdGUuZ28odGhpcy5zZWxlY3RlZC50YWJJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG9uTmF2aWdhdGlvblNlbGVjdChzdGF0ZTogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5pbml0U2VsZWN0KHN0YXRlKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWQudGFiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuJHN0YXRlLmdvKHN0YXRlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ3BpcFNldHRpbmdzLlBhZ2UnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ3BpcFNldHRpbmdzUGFnZUNvbnRyb2xsZXInLCBTZXR0aW5nc1BhZ2VDb250cm9sbGVyKTtcclxuIiwie1xyXG4gICAgZnVuY3Rpb24gY29uZmlndXJlU2V0dGluZ3NQYWdlUm91dGVzKCRzdGF0ZVByb3ZpZGVyKSB7XHJcbiAgICAgICAgJHN0YXRlUHJvdmlkZXJcclxuICAgICAgICAgICAgLnN0YXRlKCdzZXR0aW5ncycsIHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9zZXR0aW5ncz9wYXJ0eV9pZCcsXHJcbiAgICAgICAgICAgICAgICBhdXRoOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3BpcFNldHRpbmdzUGFnZUNvbnRyb2xsZXInLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwYWdlL1NldHRpbmdzUGFnZS5odG1sJ1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ3BpcFNldHRpbmdzLlBhZ2UnKVxyXG4gICAgICAgIC5jb25maWcoY29uZmlndXJlU2V0dGluZ3NQYWdlUm91dGVzKTtcclxufVxyXG4iLCJhbmd1bGFyLm1vZHVsZSgncGlwU2V0dGluZ3MuUGFnZScsIFtcclxuICAgICd1aS5yb3V0ZXInLCBcclxuICAgICdwaXBTZXR0aW5ncy5TZXJ2aWNlJyxcclxuICAgICdwaXBOYXYnLCBcclxuICAgICdwaXBTZWxlY3RlZCcsXHJcbiAgICAncGlwVHJhbnNsYXRlJyxcclxuICAgICdwaXBTZXR0aW5ncy5UZW1wbGF0ZXMnXHJcbiAgICBdKTtcclxuXHJcblxyXG5pbXBvcnQgJy4vU2V0dGluZ3NQYWdlJztcclxuaW1wb3J0ICcuL1NldHRpbmdzUGFnZVJvdXRlcyc7IiwiaW1wb3J0IHsgU2V0dGluZ3NUYWIgfSBmcm9tICcuL1NldHRpbmdzVGFiJztcclxuXHJcbmV4cG9ydCBjbGFzcyBTZXR0aW5nc0NvbmZpZyB7XHJcbiAgICBwdWJsaWMgZGVmYXVsdFRhYjogc3RyaW5nO1xyXG4gICAgcHVibGljIHRhYnM6IFNldHRpbmdzVGFiW10gPSBbXTtcclxuICAgIHB1YmxpYyB0aXRsZVRleHQ6IHN0cmluZyA9ICdTRVRUSU5HU19USVRMRSc7XHJcbiAgICBwdWJsaWMgdGl0bGVMb2dvOiBib29sZWFuID0gbnVsbDtcclxuICAgIHB1YmxpYyBpc05hdkljb246IGJvb2xlYW4gPSB0cnVlO1xyXG59XHJcbiIsImltcG9ydCB7IFNldHRpbmdzVGFiIH0gZnJvbSAnLi9TZXR0aW5nc1RhYic7XHJcblxyXG5leHBvcnQgY2xhc3MgU2V0dGluZ3NQYWdlU2VsZWN0ZWRUYWIge1xyXG4gICAgcHVibGljIHRhYjogU2V0dGluZ3NUYWI7XHJcbiAgICBwdWJsaWMgdGFiSW5kZXg6IG51bWJlciA9IDA7XHJcbiAgICBwdWJsaWMgdGFiSWQ6IHN0cmluZztcclxufSIsImltcG9ydCB7IFNldHRpbmdzVGFiIH0gZnJvbSAnLi9TZXR0aW5nc1RhYic7XHJcbmltcG9ydCB7IFNldHRpbmdzQ29uZmlnIH0gZnJvbSAnLi9TZXR0aW5nc0NvbmZpZyc7XHJcbmltcG9ydCB7IElTZXR0aW5nc1NlcnZpY2UgfSBmcm9tICcuL0lTZXR0aW5nc1NlcnZpY2UnO1xyXG5pbXBvcnQgeyBJU2V0dGluZ3NQcm92aWRlciB9IGZyb20gJy4vSVNldHRpbmdzU2VydmljZSc7XHJcblxyXG5jbGFzcyBTZXR0aW5nc1NlcnZpY2UgaW1wbGVtZW50cyBJU2V0dGluZ3NTZXJ2aWNlIHtcclxuICAgIHByaXZhdGUgX2NvbmZpZzogU2V0dGluZ3NDb25maWc7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKGNvbmZpZzogU2V0dGluZ3NDb25maWcpIHtcclxuICAgICAgICBcIm5nSW5qZWN0XCI7XHJcbiAgICAgICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0RnVsbFN0YXRlTmFtZShzdGF0ZTogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gJ3NldHRpbmdzLicgKyBzdGF0ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0RGVmYXVsdFRhYihuYW1lOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICBpZiAoIV8uZmluZCh0aGlzLl9jb25maWcudGFicywgKHRhYjogU2V0dGluZ3NUYWIpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRhYi5zdGF0ZSA9PT0gJ3NldHRpbmdzLicgKyBuYW1lO1xyXG4gICAgICAgIH0pKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGFiIHdpdGggc3RhdGUgbmFtZSBcIicgKyBuYW1lICsgJ1wiIGlzIG5vdCByZWdpc3RlcmVkJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9jb25maWcuZGVmYXVsdFRhYiA9IHRoaXMuZ2V0RnVsbFN0YXRlTmFtZShuYW1lKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0RGVmYXVsdFRhYigpOiBTZXR0aW5nc1RhYiB7XHJcbiAgICAgICAgbGV0IGRlZmF1bHRUYWI6IFNldHRpbmdzVGFiO1xyXG5cclxuICAgICAgICBkZWZhdWx0VGFiID0gXy5maW5kKHRoaXMuX2NvbmZpZy50YWJzLCAodGFiOiBTZXR0aW5nc1RhYikgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGFiLnN0YXRlID09PSB0aGlzLl9jb25maWcuZGVmYXVsdFRhYjtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gXy5jbG9uZURlZXAoZGVmYXVsdFRhYik7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNob3dUaXRsZVRleHQgKG5ld1RpdGxlVGV4dDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICBpZiAobmV3VGl0bGVUZXh0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbmZpZy50aXRsZVRleHQgPSBuZXdUaXRsZVRleHQ7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbmZpZy50aXRsZUxvZ28gPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbmZpZy50aXRsZVRleHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNob3dUaXRsZUxvZ28obmV3VGl0bGVMb2dvKSB7XHJcbiAgICAgICAgaWYgKG5ld1RpdGxlTG9nbykge1xyXG4gICAgICAgICAgICB0aGlzLl9jb25maWcudGl0bGVMb2dvID0gbmV3VGl0bGVMb2dvO1xyXG4gICAgICAgICAgICB0aGlzLl9jb25maWcudGl0bGVUZXh0ID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl9jb25maWcudGl0bGVMb2dvO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzaG93TmF2SWNvbih2YWx1ZTogYm9vbGVhbik6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmICh2YWx1ZSAhPT0gbnVsbCAmJiB2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbmZpZy5pc05hdkljb24gPSAhIXZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbmZpZy5pc05hdkljb247XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFRhYnMoKTogU2V0dGluZ3NUYWJbXSB7XHJcbiAgICAgICAgcmV0dXJuIF8uY2xvbmVEZWVwKHRoaXMuX2NvbmZpZy50YWJzKTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmNsYXNzIFNldHRpbmdzUHJvdmlkZXIgaW1wbGVtZW50cyBJU2V0dGluZ3NQcm92aWRlciB7XHJcbiAgICBwcml2YXRlIF9zZXJ2aWNlOiBTZXR0aW5nc1NlcnZpY2U7XHJcbiAgICBwcml2YXRlIF9jb25maWc6IFNldHRpbmdzQ29uZmlnID0gbmV3IFNldHRpbmdzQ29uZmlnKCk7XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSAkc3RhdGVQcm92aWRlcjogbmcudWkuSVN0YXRlUHJvdmlkZXIpIHt9XHJcblxyXG4gICAgcHVibGljIGdldEZ1bGxTdGF0ZU5hbWUoc3RhdGU6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuICdzZXR0aW5ncy4nICsgc3RhdGU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldERlZmF1bHRUYWIoKTogU2V0dGluZ3NUYWIge1xyXG4gICAgICAgIGxldCBkZWZhdWx0VGFiOiBTZXR0aW5nc1RhYjtcclxuXHJcbiAgICAgICAgZGVmYXVsdFRhYiA9IF8uZmluZCh0aGlzLl9jb25maWcudGFicywgKHRhYjogU2V0dGluZ3NUYWIpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRhYi5zdGF0ZSA9PT0gZGVmYXVsdFRhYi5zdGF0ZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIF8uY2xvbmVEZWVwKGRlZmF1bHRUYWIpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhZGRUYWIodGFiT2JqOiBTZXR0aW5nc1RhYik6IHZvaWQge1xyXG4gICAgICAgIGxldCBleGlzdGluZ1RhYjogU2V0dGluZ3NUYWI7XHJcblxyXG4gICAgICAgIHRoaXMudmFsaWRhdGVUYWIodGFiT2JqKTtcclxuICAgICAgICBleGlzdGluZ1RhYiA9IF8uZmluZCh0aGlzLl9jb25maWcudGFicywgKHRhYjogU2V0dGluZ3NUYWIpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRhYi5zdGF0ZSA9PT0gJ3NldHRpbmdzLicgKyB0YWJPYmouc3RhdGU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKGV4aXN0aW5nVGFiKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGFiIHdpdGggc3RhdGUgbmFtZSBcIicgKyB0YWJPYmouc3RhdGUgKyAnXCIgaXMgYWxyZWFkeSByZWdpc3RlcmVkJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9jb25maWcudGFicy5wdXNoKHtcclxuICAgICAgICAgICAgc3RhdGU6IHRoaXMuZ2V0RnVsbFN0YXRlTmFtZSh0YWJPYmouc3RhdGUpLFxyXG4gICAgICAgICAgICB0aXRsZTogdGFiT2JqLnRpdGxlLFxyXG4gICAgICAgICAgICBpbmRleDogdGFiT2JqLmluZGV4IHx8IDEwMDAwMCxcclxuICAgICAgICAgICAgYWNjZXNzOiB0YWJPYmouYWNjZXNzLFxyXG4gICAgICAgICAgICB2aXNpYmxlOiB0YWJPYmoudmlzaWJsZSAhPT0gZmFsc2UsXHJcbiAgICAgICAgICAgIHN0YXRlQ29uZmlnOiBfLmNsb25lRGVlcCh0YWJPYmouc3RhdGVDb25maWcpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy4kc3RhdGVQcm92aWRlci5zdGF0ZSh0aGlzLmdldEZ1bGxTdGF0ZU5hbWUodGFiT2JqLnN0YXRlKSwgdGFiT2JqLnN0YXRlQ29uZmlnKTtcclxuXHJcbiAgICAgICAgLy8gaWYgd2UganVzdCBhZGRlZCBmaXJzdCBzdGF0ZSBhbmQgbm8gZGVmYXVsdCBzdGF0ZSBpcyBzcGVjaWZpZWRcclxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuX2NvbmZpZy5kZWZhdWx0VGFiID09PSAndW5kZWZpbmVkJyAmJiB0aGlzLl9jb25maWcudGFicy5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXREZWZhdWx0VGFiKHRhYk9iai5zdGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXREZWZhdWx0VGFiKG5hbWU6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIC8vIFRPRE8gW2FwaWRoaXJueWldIGV4dHJhY3QgZXhwcmVzc2lvbiBpbnNpZGUgJ2lmJyBpbnRvIHZhcmlhYmxlLiBJdCBpc24ndCByZWFkYWJsZSBub3cuXHJcbiAgICAgICAgaWYgKCFfLmZpbmQodGhpcy5fY29uZmlnLnRhYnMsICh0YWI6IFNldHRpbmdzVGFiKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0YWIuc3RhdGUgPT09ICdzZXR0aW5ncy4nICsgbmFtZTtcclxuICAgICAgICB9KSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RhYiB3aXRoIHN0YXRlIG5hbWUgXCInICsgbmFtZSArICdcIiBpcyBub3QgcmVnaXN0ZXJlZCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fY29uZmlnLmRlZmF1bHRUYWIgPSB0aGlzLmdldEZ1bGxTdGF0ZU5hbWUobmFtZSk7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLiRzdGF0ZVByb3ZpZGVyKTtcclxuICAgICAgICAvL3RoaXMuJHN0YXRlUHJvdmlkZXIuZ28odGhpcy5fY29uZmlnLmRlZmF1bHRUYWIpO1xyXG4gICAgICAgICAgICAvL3BpcEF1dGhTdGF0ZVByb3ZpZGVyLnJlZGlyZWN0KCdzZXR0aW5ncycsIGdldEZ1bGxTdGF0ZU5hbWUobmFtZSkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVmFsaWRhdGVzIHBhc3NlZCB0YWIgY29uZmlnIG9iamVjdFxyXG4gICAgICogSWYgcGFzc2VkIHRhYiBpcyBub3QgdmFsaWQgaXQgd2lsbCB0aHJvdyBhbiBlcnJvclxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHZhbGlkYXRlVGFiKHRhYk9iajogU2V0dGluZ3NUYWIpOiB2b2lkIHtcclxuICAgICAgICBpZiAoIXRhYk9iaiB8fCAhXy5pc09iamVjdCh0YWJPYmopKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBvYmplY3QnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0YWJPYmouc3RhdGUgPT09IG51bGwgfHwgdGFiT2JqLnN0YXRlID09PSAnJykge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RhYiBzaG91bGQgaGF2ZSB2YWxpZCBBbmd1bGFyIFVJIHJvdXRlciBzdGF0ZSBuYW1lJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGFiT2JqLmFjY2VzcyAmJiAhXy5pc0Z1bmN0aW9uKHRhYk9iai5hY2Nlc3MpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignXCJhY2Nlc3NcIiBzaG91bGQgYmUgYSBmdW5jdGlvbicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0YWJPYmouc3RhdGVDb25maWcgfHwgIV8uaXNPYmplY3QodGFiT2JqLnN0YXRlQ29uZmlnKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgc3RhdGUgY29uZmlndXJhdGlvbiBvYmplY3QnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNob3dUaXRsZVRleHQgKG5ld1RpdGxlVGV4dDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICBpZiAobmV3VGl0bGVUZXh0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbmZpZy50aXRsZVRleHQgPSBuZXdUaXRsZVRleHQ7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbmZpZy50aXRsZUxvZ28gPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbmZpZy50aXRsZVRleHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNob3dUaXRsZUxvZ28obmV3VGl0bGVMb2dvKSB7XHJcbiAgICAgICAgaWYgKG5ld1RpdGxlTG9nbykge1xyXG4gICAgICAgICAgICB0aGlzLl9jb25maWcudGl0bGVMb2dvID0gbmV3VGl0bGVMb2dvO1xyXG4gICAgICAgICAgICB0aGlzLl9jb25maWcudGl0bGVUZXh0ID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl9jb25maWcudGl0bGVMb2dvO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzaG93TmF2SWNvbih2YWx1ZTogYm9vbGVhbik6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmICh2YWx1ZSAhPT0gbnVsbCAmJiB2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbmZpZy5pc05hdkljb24gPSAhIXZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbmZpZy5pc05hdkljb247XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljICRnZXQoKTogSVNldHRpbmdzU2VydmljZSB7XHJcbiAgICAgICAgXCJuZ0luamVjdFwiO1xyXG5cclxuICAgICAgICBpZiAoXy5pc051bGwodGhpcy5fc2VydmljZSkgfHwgXy5pc1VuZGVmaW5lZCh0aGlzLl9zZXJ2aWNlKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9zZXJ2aWNlID0gbmV3IFNldHRpbmdzU2VydmljZSh0aGlzLl9jb25maWcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gdGhpcy5fc2VydmljZTtcclxuICAgIH1cclxufVxyXG5cclxuYW5ndWxhclxyXG4gICAgLm1vZHVsZSgncGlwU2V0dGluZ3MuU2VydmljZScpXHJcbiAgICAucHJvdmlkZXIoJ3BpcFNldHRpbmdzJywgU2V0dGluZ3NQcm92aWRlcik7XHJcblxyXG4iLCJleHBvcnQgY2xhc3MgU2V0dGluZ3NTdGF0ZUNvbmZpZyB7XHJcbiAgICBwdWJsaWMgdXJsOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgYXV0aDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHVibGljIHRlbXBsYXRlVXJsPzogc3RyaW5nO1xyXG4gICAgcHVibGljIHRlbXBsYXRlPzogc3RyaW5nO1xyXG59IiwiaW1wb3J0IHsgU2V0dGluZ3NTdGF0ZUNvbmZpZyB9IGZyb20gJy4vU2V0dGluZ3NTdGF0ZUNvbmZpZyc7XHJcblxyXG5leHBvcnQgY2xhc3MgU2V0dGluZ3NUYWIge1xyXG4gICAgcHVibGljIHN0YXRlOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgdGl0bGU6IHN0cmluZztcclxuICAgIHB1YmxpYyBpbmRleDogbnVtYmVyO1xyXG4gICAgcHVibGljIGFjY2VzczogRnVuY3Rpb247XHJcbiAgICBwdWJsaWMgdmlzaWJsZTogYm9vbGVhbjtcclxuICAgIHB1YmxpYyBzdGF0ZUNvbmZpZzogU2V0dGluZ3NTdGF0ZUNvbmZpZztcclxufVxyXG4iLCJhbmd1bGFyLm1vZHVsZSgncGlwU2V0dGluZ3MuU2VydmljZScsIFtdKTtcclxuXHJcbmltcG9ydCAnLi9TZXR0aW5nc0NvbmZpZyc7XHJcbmltcG9ydCAnLi9TZXR0aW5nc1BhZ2VTZWxlY3RlZFRhYic7XHJcbmltcG9ydCAnLi9TZXR0aW5nc1N0YXRlQ29uZmlnJztcclxuaW1wb3J0ICcuL1NldHRpbmdzVGFiJztcclxuaW1wb3J0ICcuL1NldHRpbmdzU2VydmljZSc7XHJcblxyXG5leHBvcnQgKiBmcm9tICcuL1NldHRpbmdzQ29uZmlnJztcclxuZXhwb3J0ICogZnJvbSAnLi9TZXR0aW5nc1BhZ2VTZWxlY3RlZFRhYic7XHJcbmV4cG9ydCAqIGZyb20gJy4vU2V0dGluZ3NTdGF0ZUNvbmZpZyc7XHJcbmV4cG9ydCAqIGZyb20gJy4vU2V0dGluZ3NUYWInO1xyXG5leHBvcnQgKiBmcm9tICcuL1NldHRpbmdzU2VydmljZSc7XHJcbiIsIihmdW5jdGlvbihtb2R1bGUpIHtcbnRyeSB7XG4gIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdwaXBTZXR0aW5ncy5UZW1wbGF0ZXMnKTtcbn0gY2F0Y2ggKGUpIHtcbiAgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ3BpcFNldHRpbmdzLlRlbXBsYXRlcycsIFtdKTtcbn1cbm1vZHVsZS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgncGFnZS9TZXR0aW5nc1BhZ2UuaHRtbCcsXG4gICAgJzxtZC10b29sYmFyIGNsYXNzPVwicGlwLWFwcGJhci1leHRcIj48L21kLXRvb2xiYXI+XFxuJyArXG4gICAgJzxwaXAtZG9jdW1lbnQgd2lkdGg9XCI4MDBcIiBtaW4taGVpZ2h0PVwiNDAwXCJcXG4nICtcbiAgICAnICAgICAgICAgICAgICBjbGFzcz1cInBpcC1zZXR0aW5nc1wiPlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgIDxkaXYgY2xhc3M9XCJwaXAtbWVudS1jb250YWluZXJcIlxcbicgK1xuICAgICcgICAgICAgICBuZy1oaWRlPVwidm0ubWFuYWdlciA9PT0gZmFsc2UgfHwgIXZtLnRhYnMgfHwgdm0udGFicy5sZW5ndGggPCAxXCI+XFxuJyArXG4gICAgJyAgICAgICAgPG1kLWxpc3QgY2xhc3M9XCJwaXAtbWVudSBwaXAtc2ltcGxlLWxpc3RcIlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgIHBpcC1zZWxlY3RlZD1cInZtLnNlbGVjdGVkLnRhYkluZGV4XCJcXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICBwaXAtc2VsZWN0ZWQtd2F0Y2g9XCJ2bS5zZWxlY3RlZC5uYXZJZFwiXFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgcGlwLXNlbGVjdD1cInZtLm9uTmF2aWdhdGlvblNlbGVjdCgkZXZlbnQuaWQpXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDxtZC1saXN0LWl0ZW0gY2xhc3M9XCJwaXAtc2ltcGxlLWxpc3QtaXRlbSBwaXAtc2VsZWN0YWJsZSBmbGV4XCJcXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICAgICAgICBuZy1yZXBlYXQ9XCJ0YWIgaW4gdm0udGFicyB0cmFjayBieSB0YWIuc3RhdGVcIiBuZy1pZj1cInZtLiRwYXJ0eS5pZCA9PSB2bS4kdXNlci5pZCB8fFxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYi5zdGF0ZSA9PSBcXCdzZXR0aW5ncy5iYXNpY19pbmZvXFwnfHwgdGFiLnN0YXRlID09XFwnc2V0dGluZ3MuY29udGFjdF9pbmZvXFwnXFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgdGFiLnN0YXRlID09XFwnc2V0dGluZ3MuYmxhY2tsaXN0XFwnXCJcXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICAgICAgICBtZC1pbmstcmlwcGxlXFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgICAgICAgcGlwLWlkPVwie3s6OiB0YWIuc3RhdGUgfX1cIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDxwPnt7Ojp0YWIudGl0bGUgfCB0cmFuc2xhdGV9fTwvcD5cXG4nICtcbiAgICAnICAgICAgICAgICAgPC9tZC1saXN0LWl0ZW0+XFxuJyArXG4gICAgJyAgICAgICAgPC9tZC1saXN0PlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgICAgICA8ZGl2IGNsYXNzPVwicGlwLWNvbnRlbnQtY29udGFpbmVyXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDxwaXAtZHJvcGRvd24gcGlwLWFjdGlvbnM9XCJ2bS50YWJzXCJcXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICAgICAgICBwaXAtZHJvcGRvd24tc2VsZWN0PVwidm0ub25Ecm9wZG93blNlbGVjdFwiXFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgICAgICAgcGlwLWFjdGl2ZS1pbmRleD1cInZtLnNlbGVjdGVkLnRhYkluZGV4XCI+PC9waXAtZHJvcGRvd24+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicGlwLWJvZHkgdHAyNC1mbGV4IGxheW91dC1jb2x1bW5cIiB1aS12aWV3PjwvZGl2PlxcbicgK1xuICAgICcgICAgICAgIDwvZGl2PlxcbicgK1xuICAgICcgICAgPC9kaXY+XFxuJyArXG4gICAgJyAgICA8ZGl2IGNsYXNzPVwibGF5b3V0LWNvbHVtbiBsYXlvdXQtYWxpZ24tY2VudGVyLWNlbnRlciBmbGV4XCJcXG4nICtcbiAgICAnICAgICAgICAgbmctc2hvdz1cInZtLm1hbmFnZXIgPT09IGZhbHNlIHx8ICF2bS50YWJzIHx8IHZtLnRhYnMubGVuZ3RoIDwgMVwiPlxcbicgK1xuICAgICcgICAgICAgIHt7OjpcXCdFUlJPUl80MDBcXCcgfCB0cmFuc2xhdGV9fVxcbicgK1xuICAgICcgICAgPC9kaXY+XFxuJyArXG4gICAgJzwvcGlwLWRvY3VtZW50PicpO1xufV0pO1xufSkoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGlwLXdlYnVpLXNldHRpbmdzLWh0bWwuanMubWFwXG4iXX0="}