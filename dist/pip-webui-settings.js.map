{"version":3,"sources":["../node_modules/browser-pack/_prelude.js","src/SettingsModule.ts","src/settings_page/SettingsPageController.ts","src/settings_page/SettingsPageRoutes.ts","src/settings_page/index.ts","src/settings_service/SettingsService.ts","src/settings_service/index.ts","temp/pip-webui-settings-html.min.js"],"names":[],"mappings":"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","file":"pip-webui-settings.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict';\r\n\r\nimport './settings_service/index';\r\nimport './settings_page/index';\r\n\r\nangular.module('pipSettings', [\r\n    'pipSettings.Service',\r\n    'pipSettings.Page'\r\n]);\r\n\r\nexport * from './settings_service';\r\nexport * from './settings_page';","// Prevent junk from going into typescript definitions\r\n\r\nimport {ISettingsService, SettingsTab} from '../settings_service/SettingsService';\r\n\r\nexport class SettingsPageSelectedTab {\r\n    public tab: SettingsTab;\r\n    public tabIndex: number = 0;\r\n    public tabId: string;\r\n}\r\n\r\ninterface ISettingsPageController {\r\n    tabs: SettingsTab[];\r\n    selected: SettingsPageSelectedTab;\r\n    onDropdownSelect: Function;\r\n    onNavigationSelect(state: string): void;\r\n}\r\n\r\n\r\n\r\n(() => {\r\n\r\n    class SettingsPageController implements ISettingsPageController {\r\n    public tabs: SettingsTab[];\r\n    public selected: SettingsPageSelectedTab;\r\n    public onDropdownSelect: Function;\r\n\r\n    constructor(\r\n        private $state: ng.ui.IStateService,\r\n        pipNavService: pip.nav.INavService,\r\n        pipSettings: ISettingsService,\r\n        $rootScope: ng.IRootScopeService, \r\n        $timeout: angular.ITimeoutService\r\n    ) {\r\n\r\n        this.tabs = _.filter(pipSettings.getTabs(), (tab: SettingsTab) => {\r\n                if (tab.visible === true && (tab.access ? tab.access($rootScope['$user'], tab) : true)) {\r\n                    return tab;\r\n                }\r\n            });\r\n\r\n        this.tabs = _.sortBy(this.tabs, 'index');\r\n\r\n        this.selected = new SettingsPageSelectedTab();\r\n        if (this.$state.current.name !== 'settings') {\r\n            this.initSelect(this.$state.current.name);\r\n        } else if (this.$state.current.name === 'settings' && pipSettings.getDefaultTab()) {\r\n            this.initSelect(pipSettings.getDefaultTab().state);\r\n        } else {\r\n            $timeout(() => {\r\n                if (pipSettings.getDefaultTab()) {\r\n                    this.initSelect(pipSettings.getDefaultTab().state);\r\n                }\r\n                if (!pipSettings.getDefaultTab() && this.tabs.length > 0) {\r\n                     this.initSelect(this.tabs[0].state);\r\n                }\r\n            });\r\n        }\r\n\r\n        pipNavService.icon.showMenu();\r\n        pipNavService.breadcrumb.text = \"Settings\";\r\n        pipNavService.actions.hide();\r\n        pipNavService.appbar.removeShadow();\r\n        \r\n        this.onDropdownSelect = (state) => {\r\n            this.onNavigationSelect(state.state);\r\n        }\r\n    }\r\n\r\n    private initSelect(state: string): void {\r\n        this.selected.tab = _.find(this.tabs, (tab: SettingsTab) => {\r\n            return tab.state === state;\r\n        });\r\n        this.selected.tabIndex = _.indexOf(this.tabs, this.selected.tab);\r\n        this.selected.tabId = state;\r\n    }\r\n\r\n    public onNavigationSelect(state: string): void {\r\n        this.initSelect(state);\r\n\r\n        if (this.selected.tab) {\r\n            this.$state.go(state);\r\n        }\r\n    }\r\n}\r\n\r\nangular.module('pipSettings.Page')\r\n    .controller('pipSettingsPageController', SettingsPageController);\r\n})();","'use strict';\r\n\r\nfunction configureSettingsPageRoutes($stateProvider) {\r\n    $stateProvider\r\n        .state('settings', {\r\n            url: '/settings?party_id',\r\n            auth: true,\r\n            controllerAs: 'vm',\r\n            controller: 'pipSettingsPageController',\r\n            templateUrl: 'settings_page/SettingsPage.html'\r\n        });\r\n       \r\n}\r\n\r\nangular.module('pipSettings.Page')\r\n    .config(configureSettingsPageRoutes);\r\n","'use strict';\r\n\r\nangular.module('pipSettings.Page', [\r\n    'ui.router', \r\n    'pipSettings.Service',\r\n    'pipNav', \r\n    'pipSelected',\r\n    'pipTranslate',\r\n    'pipSettings.Templates'\r\n    ]);\r\n\r\n\r\nimport './SettingsPageController';\r\nimport './SettingsPageRoutes';","'use strict';\r\n\r\nexport class SettingsTab {\r\n    public state: string;\r\n    public title: string;\r\n    public index: number;\r\n    public access: Function;\r\n    public visible: boolean;\r\n    public stateConfig: SettingsStateConfig;\r\n}\r\n\r\nexport class SettingsStateConfig {\r\n    public url: string;\r\n    public auth: boolean = false;\r\n    public templateUrl?: string;\r\n    public template?: string;\r\n}\r\n\r\nexport interface ISettingsService {\r\n    getDefaultTab(): SettingsTab;\r\n    showTitleText (newTitleText: string): void;\r\n    showTitleLogo(newTitleLogo);\r\n    setDefaultTab(name: string): void;\r\n    showNavIcon(value: boolean): boolean;\r\n    getTabs(): SettingsTab[];\r\n}\r\n\r\nexport interface ISettingsProvider extends ng.IServiceProvider {\r\n    getDefaultTab(): SettingsTab;\r\n    addTab(tabObj: SettingsTab): void;\r\n    setDefaultTab(name: string): void;\r\n    getFullStateName(state: string): string;\r\n}\r\n\r\nexport class SettingsConfig {\r\n\r\n    public defaultTab: string;\r\n    public tabs: SettingsTab[] = [];\r\n    public titleText: string = 'SETTINGS_TITLE';\r\n    public titleLogo: boolean = null;\r\n    public isNavIcon: boolean = true;\r\n\r\n}\r\n\r\nclass SettingsService implements ISettingsService {\r\n    private _config: SettingsConfig;\r\n\r\n    public constructor(config: SettingsConfig) {\r\n        \"ngInject\";\r\n        this._config = config;\r\n    }\r\n\r\n    private getFullStateName(state: string): string {\r\n        return 'settings.' + state;\r\n    }\r\n\r\n    public setDefaultTab(name: string): void {\r\n        if (!_.find(this._config.tabs, (tab: SettingsTab) => {\r\n            return tab.state === 'settings.' + name;\r\n        })) {\r\n            throw new Error('Tab with state name \"' + name + '\" is not registered');\r\n        }\r\n\r\n        this._config.defaultTab = this.getFullStateName(name);\r\n    }\r\n\r\n    public getDefaultTab(): SettingsTab {\r\n        let defaultTab: SettingsTab;\r\n\r\n        defaultTab = _.find(this._config.tabs, (tab: SettingsTab) => {\r\n            return tab.state === defaultTab.state;\r\n        });\r\n        return _.cloneDeep(defaultTab);\r\n    }\r\n\r\n    public showTitleText (newTitleText: string): string {\r\n        if (newTitleText) {\r\n            this._config.titleText = newTitleText;\r\n            this._config.titleLogo = null;\r\n        }\r\n\r\n        return this._config.titleText;\r\n    }\r\n\r\n    public showTitleLogo(newTitleLogo) {\r\n        if (newTitleLogo) {\r\n            this._config.titleLogo = newTitleLogo;\r\n            this._config.titleText = null;\r\n        }\r\n\r\n        return this._config.titleLogo;\r\n    }\r\n\r\n    public showNavIcon(value: boolean): boolean {\r\n        if (value !== null && value !== undefined) {\r\n            this._config.isNavIcon = !!value;\r\n        }\r\n\r\n        return this._config.isNavIcon;\r\n    }\r\n\r\n    public getTabs(): SettingsTab[] {\r\n        return _.cloneDeep(this._config.tabs);\r\n    }\r\n\r\n}\r\n\r\nclass SettingsProvider implements ISettingsProvider {\r\n    private _service: SettingsService;\r\n    private _config: SettingsConfig = new SettingsConfig();\r\n\r\n    constructor(private $stateProvider: ng.ui.IStateProvider) {}\r\n\r\n    public getFullStateName(state: string): string {\r\n        return 'settings.' + state;\r\n    }\r\n\r\n    public getDefaultTab(): SettingsTab {\r\n        let defaultTab: SettingsTab;\r\n\r\n        defaultTab = _.find(this._config.tabs, (tab: SettingsTab) => {\r\n            return tab.state === defaultTab.state;\r\n        });\r\n\r\n        return _.cloneDeep(defaultTab);\r\n    }\r\n\r\n    public addTab(tabObj: SettingsTab): void {\r\n        let existingTab: SettingsTab;\r\n\r\n        this.validateTab(tabObj);\r\n        existingTab = _.find(this._config.tabs, (tab: SettingsTab) => {\r\n            return tab.state === 'settings.' + tabObj.state;\r\n        });\r\n        if (existingTab) {\r\n            throw new Error('Tab with state name \"' + tabObj.state + '\" is already registered');\r\n        }\r\n\r\n        this._config.tabs.push({\r\n            state: this.getFullStateName(tabObj.state),\r\n            title: tabObj.title,\r\n            index: tabObj.index || 100000,\r\n            access: tabObj.access,\r\n            visible: tabObj.visible !== false,\r\n            stateConfig: _.cloneDeep(tabObj.stateConfig)\r\n        });\r\n        this.$stateProvider.state(this.getFullStateName(tabObj.state), tabObj.stateConfig);\r\n\r\n        // if we just added first state and no default state is specified\r\n        if (typeof this._config.defaultTab === 'undefined' && this._config.tabs.length === 1) {\r\n            this.setDefaultTab(tabObj.state);\r\n        }\r\n    }\r\n\r\n    public setDefaultTab(name: string): void {\r\n        // TODO [apidhirnyi] extract expression inside 'if' into variable. It isn't readable now.\r\n        if (!_.find(this._config.tabs, (tab: SettingsTab) => {\r\n            return tab.state === 'settings.' + name;\r\n        })) {\r\n            throw new Error('Tab with state name \"' + name + '\" is not registered');\r\n        }\r\n\r\n        this._config.defaultTab = this.getFullStateName(name);\r\n        //this.$stateProvider.go(this._config.defaultTab);\r\n            //pipAuthStateProvider.redirect('settings', getFullStateName(name));\r\n    }\r\n\r\n    /**\r\n     * Validates passed tab config object\r\n     * If passed tab is not valid it will throw an error\r\n     */\r\n\r\n    private validateTab(tabObj: SettingsTab): void {\r\n        if (!tabObj || !_.isObject(tabObj)) {\r\n            throw new Error('Invalid object');\r\n        }\r\n\r\n        if (tabObj.state === null || tabObj.state === '') {\r\n            throw new Error('Tab should have valid Angular UI router state name');\r\n        }\r\n\r\n        if (tabObj.access && !_.isFunction(tabObj.access)) {\r\n            throw new Error('\"access\" should be a function');\r\n        }\r\n\r\n        if (!tabObj.stateConfig || !_.isObject(tabObj.stateConfig)) {\r\n            throw new Error('Invalid state configuration object');\r\n        }\r\n    }\r\n\r\n    public showTitleText (newTitleText: string): string {\r\n        if (newTitleText) {\r\n            this._config.titleText = newTitleText;\r\n            this._config.titleLogo = null;\r\n        }\r\n\r\n        return this._config.titleText;\r\n    }\r\n\r\n    public showTitleLogo(newTitleLogo) {\r\n        if (newTitleLogo) {\r\n            this._config.titleLogo = newTitleLogo;\r\n            this._config.titleText = null;\r\n        }\r\n\r\n        return this._config.titleLogo;\r\n    }\r\n\r\n    public showNavIcon(value: boolean): boolean {\r\n        if (value !== null && value !== undefined) {\r\n            this._config.isNavIcon = !!value;\r\n        }\r\n\r\n        return this._config.isNavIcon;\r\n    }\r\n\r\n    public $get(): ISettingsService {\r\n        \"ngInject\";\r\n\r\n        if (_.isNull(this._service) || _.isUndefined(this._service)) {\r\n            this._service = new SettingsService(this._config);\r\n        }\r\n        \r\n        return this._service;\r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipSettings.Service')\r\n    .provider('pipSettings', SettingsProvider);\r\n\r\n","'use strict';\r\n\r\nangular.module('pipSettings.Service', []);\r\n\r\nimport './SettingsService';","(function(module) {\ntry {\n  module = angular.module('pipSettings.Templates');\n} catch (e) {\n  module = angular.module('pipSettings.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('settings_page/SettingsPage.html',\n    '<md-toolbar class=\"pip-appbar-ext\"></md-toolbar><pip-document width=\"800\" min-height=\"400\" class=\"pip-settings\"><div class=\"pip-menu-container\" ng-hide=\"vm.manager === false || !vm.tabs || vm.tabs.length < 1\"><md-list class=\"pip-menu pip-simple-list\" pip-selected=\"vm.selected.tabIndex\" pip-selected-watch=\"vm.selected.navId\" pip-select=\"vm.onNavigationSelect($event.id)\"><md-list-item class=\"pip-simple-list-item pip-selectable flex\" ng-repeat=\"tab in vm.tabs track by tab.state\" ng-if=\"vm.$party.id == vm.$user.id || tab.state == \\'settings.basic_info\\'|| tab.state ==\\'settings.contact_info\\' || tab.state ==\\'settings.blacklist\\'\" md-ink-ripple=\"\" pip-id=\"{{:: tab.state }}\"><p>{{::tab.title | translate}}</p></md-list-item></md-list><div class=\"pip-content-container\"><pip-dropdown pip-actions=\"vm.tabs\" pip-dropdown-select=\"vm.onDropdownSelect\" pip-active-index=\"vm.selected.tabIndex\"></pip-dropdown><div class=\"pip-body tp24-flex layout-column\" ui-view=\"\"></div></div></div><div class=\"layout-column layout-align-center-center flex\" ng-show=\"vm.manager === false || !vm.tabs || vm.tabs.length < 1\">{{::\\'ERROR_400\\' | translate}}</div></pip-document>');\n}]);\n})();\n\n//# sourceMappingURL=pip-webui-settings-html.min.js.map\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvU2V0dGluZ3NNb2R1bGUudHMiLCJzcmMvc2V0dGluZ3NfcGFnZS9TZXR0aW5nc1BhZ2VDb250cm9sbGVyLnRzIiwic3JjL3NldHRpbmdzX3BhZ2UvU2V0dGluZ3NQYWdlUm91dGVzLnRzIiwic3JjL3NldHRpbmdzX3BhZ2UvaW5kZXgudHMiLCJzcmMvc2V0dGluZ3Nfc2VydmljZS9TZXR0aW5nc1NlcnZpY2UudHMiLCJzcmMvc2V0dGluZ3Nfc2VydmljZS9pbmRleC50cyIsInRlbXAvcGlwLXdlYnVpLXNldHRpbmdzLWh0bWwubWluLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUEsWUFBWSxDQUFDOztBQUViLG9DQUFrQztBQUNsQyxpQ0FBK0I7QUFFL0IsT0FBTyxDQUFDLE1BQU0sQ0FBQyxhQUFhLEVBQUU7SUFDMUIscUJBQXFCO0lBQ3JCLGtCQUFrQjtDQUNyQixDQUFDLENBQUM7Ozs7QUNKSDtJQUFBO1FBRVcsYUFBUSxHQUFXLENBQUMsQ0FBQztJQUVoQyxDQUFDO0lBQUQsOEJBQUM7QUFBRCxDQUpBLEFBSUMsSUFBQTtBQUpZLDBEQUF1QjtBQWVwQyxDQUFDO0lBRUc7UUFLQSxnQ0FDWSxNQUEyQixFQUNuQyxhQUFrQyxFQUNsQyxXQUE2QixFQUM3QixVQUFnQyxFQUNoQyxRQUFpQztZQUxyQyxpQkF3Q0M7WUF2Q1csV0FBTSxHQUFOLE1BQU0sQ0FBcUI7WUFPbkMsSUFBSSxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxPQUFPLEVBQUUsRUFBRSxVQUFDLEdBQWdCO2dCQUNyRCxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsT0FBTyxLQUFLLElBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLEVBQUUsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUNyRixNQUFNLENBQUMsR0FBRyxDQUFDO2dCQUNmLENBQUM7WUFDTCxDQUFDLENBQUMsQ0FBQztZQUVQLElBQUksQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1lBRXpDLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSx1QkFBdUIsRUFBRSxDQUFDO1lBQzlDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLElBQUksS0FBSyxVQUFVLENBQUMsQ0FBQyxDQUFDO2dCQUMxQyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQzlDLENBQUM7WUFBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxLQUFLLFVBQVUsSUFBSSxXQUFXLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQyxDQUFDO2dCQUNoRixJQUFJLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQyxhQUFhLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUN2RCxDQUFDO1lBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ0osUUFBUSxDQUFDO29CQUNMLEVBQUUsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxhQUFhLEVBQUUsQ0FBQyxDQUFDLENBQUM7d0JBQzlCLEtBQUksQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFDLGFBQWEsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDO29CQUN2RCxDQUFDO29CQUNELEVBQUUsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLGFBQWEsRUFBRSxJQUFJLEtBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7d0JBQ3RELEtBQUksQ0FBQyxVQUFVLENBQUMsS0FBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztvQkFDekMsQ0FBQztnQkFDTCxDQUFDLENBQUMsQ0FBQztZQUNQLENBQUM7WUFFRCxhQUFhLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO1lBQzlCLGFBQWEsQ0FBQyxVQUFVLENBQUMsSUFBSSxHQUFHLFVBQVUsQ0FBQztZQUMzQyxhQUFhLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxDQUFDO1lBQzdCLGFBQWEsQ0FBQyxNQUFNLENBQUMsWUFBWSxFQUFFLENBQUM7WUFFcEMsSUFBSSxDQUFDLGdCQUFnQixHQUFHLFVBQUMsS0FBSztnQkFDMUIsS0FBSSxDQUFDLGtCQUFrQixDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUN6QyxDQUFDLENBQUE7UUFDTCxDQUFDO1FBRU8sMkNBQVUsR0FBbEIsVUFBbUIsS0FBYTtZQUM1QixJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsVUFBQyxHQUFnQjtnQkFDbkQsTUFBTSxDQUFDLEdBQUcsQ0FBQyxLQUFLLEtBQUssS0FBSyxDQUFDO1lBQy9CLENBQUMsQ0FBQyxDQUFDO1lBQ0gsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDakUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1FBQ2hDLENBQUM7UUFFTSxtREFBa0IsR0FBekIsVUFBMEIsS0FBYTtZQUNuQyxJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBRXZCLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztnQkFDcEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDMUIsQ0FBQztRQUNMLENBQUM7UUFDTCw2QkFBQztJQUFELENBOURJLEFBOERILElBQUE7SUFFRCxPQUFPLENBQUMsTUFBTSxDQUFDLGtCQUFrQixDQUFDO1NBQzdCLFVBQVUsQ0FBQywyQkFBMkIsRUFBRSxzQkFBc0IsQ0FBQyxDQUFDO0FBQ3JFLENBQUMsQ0FBQyxFQUFFLENBQUM7O0FDdkZMLFlBQVksQ0FBQztBQUViLHFDQUFxQyxjQUFjO0lBQy9DLGNBQWM7U0FDVCxLQUFLLENBQUMsVUFBVSxFQUFFO1FBQ2YsR0FBRyxFQUFFLG9CQUFvQjtRQUN6QixJQUFJLEVBQUUsSUFBSTtRQUNWLFlBQVksRUFBRSxJQUFJO1FBQ2xCLFVBQVUsRUFBRSwyQkFBMkI7UUFDdkMsV0FBVyxFQUFFLGlDQUFpQztLQUNqRCxDQUFDLENBQUM7QUFFWCxDQUFDO0FBRUQsT0FBTyxDQUFDLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQztLQUM3QixNQUFNLENBQUMsMkJBQTJCLENBQUMsQ0FBQzs7QUNmekMsWUFBWSxDQUFDOztBQUViLE9BQU8sQ0FBQyxNQUFNLENBQUMsa0JBQWtCLEVBQUU7SUFDL0IsV0FBVztJQUNYLHFCQUFxQjtJQUNyQixRQUFRO0lBQ1IsYUFBYTtJQUNiLGNBQWM7SUFDZCx1QkFBdUI7Q0FDdEIsQ0FBQyxDQUFDO0FBR1Asb0NBQWtDO0FBQ2xDLGdDQUE4Qjs7OztBQ2I5QixZQUFZLENBQUM7O0FBRWI7SUFBQTtJQU9BLENBQUM7SUFBRCxrQkFBQztBQUFELENBUEEsQUFPQyxJQUFBO0FBUFksa0NBQVc7QUFTeEI7SUFBQTtRQUVXLFNBQUksR0FBWSxLQUFLLENBQUM7SUFHakMsQ0FBQztJQUFELDBCQUFDO0FBQUQsQ0FMQSxBQUtDLElBQUE7QUFMWSxrREFBbUI7QUF1QmhDO0lBQUE7UUFHVyxTQUFJLEdBQWtCLEVBQUUsQ0FBQztRQUN6QixjQUFTLEdBQVcsZ0JBQWdCLENBQUM7UUFDckMsY0FBUyxHQUFZLElBQUksQ0FBQztRQUMxQixjQUFTLEdBQVksSUFBSSxDQUFDO0lBRXJDLENBQUM7SUFBRCxxQkFBQztBQUFELENBUkEsQUFRQyxJQUFBO0FBUlksd0NBQWM7QUFVM0I7SUFHSSx5QkFBbUIsTUFBc0I7UUFDckMsVUFBVSxDQUFDO1FBQ1gsSUFBSSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUM7SUFDMUIsQ0FBQztJQUVPLDBDQUFnQixHQUF4QixVQUF5QixLQUFhO1FBQ2xDLE1BQU0sQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDO0lBQy9CLENBQUM7SUFFTSx1Q0FBYSxHQUFwQixVQUFxQixJQUFZO1FBQzdCLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxVQUFDLEdBQWdCO1lBQzVDLE1BQU0sQ0FBQyxHQUFHLENBQUMsS0FBSyxLQUFLLFdBQVcsR0FBRyxJQUFJLENBQUM7UUFDNUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ0QsTUFBTSxJQUFJLEtBQUssQ0FBQyx1QkFBdUIsR0FBRyxJQUFJLEdBQUcscUJBQXFCLENBQUMsQ0FBQztRQUM1RSxDQUFDO1FBRUQsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxDQUFDO0lBQzFELENBQUM7SUFFTSx1Q0FBYSxHQUFwQjtRQUNJLElBQUksVUFBdUIsQ0FBQztRQUU1QixVQUFVLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxVQUFDLEdBQWdCO1lBQ3BELE1BQU0sQ0FBQyxHQUFHLENBQUMsS0FBSyxLQUFLLFVBQVUsQ0FBQyxLQUFLLENBQUM7UUFDMUMsQ0FBQyxDQUFDLENBQUM7UUFDSCxNQUFNLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUNuQyxDQUFDO0lBRU0sdUNBQWEsR0FBcEIsVUFBc0IsWUFBb0I7UUFDdEMsRUFBRSxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQztZQUNmLElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxHQUFHLFlBQVksQ0FBQztZQUN0QyxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUM7UUFDbEMsQ0FBQztRQUVELE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQztJQUNsQyxDQUFDO0lBRU0sdUNBQWEsR0FBcEIsVUFBcUIsWUFBWTtRQUM3QixFQUFFLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDO1lBQ2YsSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEdBQUcsWUFBWSxDQUFDO1lBQ3RDLElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQztRQUNsQyxDQUFDO1FBRUQsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDO0lBQ2xDLENBQUM7SUFFTSxxQ0FBVyxHQUFsQixVQUFtQixLQUFjO1FBQzdCLEVBQUUsQ0FBQyxDQUFDLEtBQUssS0FBSyxJQUFJLElBQUksS0FBSyxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUM7WUFDeEMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQztRQUNyQyxDQUFDO1FBRUQsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDO0lBQ2xDLENBQUM7SUFFTSxpQ0FBTyxHQUFkO1FBQ0ksTUFBTSxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUMxQyxDQUFDO0lBRUwsc0JBQUM7QUFBRCxDQTdEQSxBQTZEQyxJQUFBO0FBRUQ7SUFJSSwwQkFBb0IsY0FBb0M7UUFBcEMsbUJBQWMsR0FBZCxjQUFjLENBQXNCO1FBRmhELFlBQU8sR0FBbUIsSUFBSSxjQUFjLEVBQUUsQ0FBQztJQUVJLENBQUM7SUFFckQsMkNBQWdCLEdBQXZCLFVBQXdCLEtBQWE7UUFDakMsTUFBTSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUM7SUFDL0IsQ0FBQztJQUVNLHdDQUFhLEdBQXBCO1FBQ0ksSUFBSSxVQUF1QixDQUFDO1FBRTVCLFVBQVUsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLFVBQUMsR0FBZ0I7WUFDcEQsTUFBTSxDQUFDLEdBQUcsQ0FBQyxLQUFLLEtBQUssVUFBVSxDQUFDLEtBQUssQ0FBQztRQUMxQyxDQUFDLENBQUMsQ0FBQztRQUVILE1BQU0sQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBQ25DLENBQUM7SUFFTSxpQ0FBTSxHQUFiLFVBQWMsTUFBbUI7UUFDN0IsSUFBSSxXQUF3QixDQUFDO1FBRTdCLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDekIsV0FBVyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsVUFBQyxHQUFnQjtZQUNyRCxNQUFNLENBQUMsR0FBRyxDQUFDLEtBQUssS0FBSyxXQUFXLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQztRQUNwRCxDQUFDLENBQUMsQ0FBQztRQUNILEVBQUUsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUM7WUFDZCxNQUFNLElBQUksS0FBSyxDQUFDLHVCQUF1QixHQUFHLE1BQU0sQ0FBQyxLQUFLLEdBQUcseUJBQXlCLENBQUMsQ0FBQztRQUN4RixDQUFDO1FBRUQsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDO1lBQ25CLEtBQUssRUFBRSxJQUFJLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQztZQUMxQyxLQUFLLEVBQUUsTUFBTSxDQUFDLEtBQUs7WUFDbkIsS0FBSyxFQUFFLE1BQU0sQ0FBQyxLQUFLLElBQUksTUFBTTtZQUM3QixNQUFNLEVBQUUsTUFBTSxDQUFDLE1BQU07WUFDckIsT0FBTyxFQUFFLE1BQU0sQ0FBQyxPQUFPLEtBQUssS0FBSztZQUNqQyxXQUFXLEVBQUUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDO1NBQy9DLENBQUMsQ0FBQztRQUNILElBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEVBQUUsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBR25GLEVBQUUsQ0FBQyxDQUFDLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLEtBQUssV0FBVyxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLE1BQU0sS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ25GLElBQUksQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3JDLENBQUM7SUFDTCxDQUFDO0lBRU0sd0NBQWEsR0FBcEIsVUFBcUIsSUFBWTtRQUU3QixFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsVUFBQyxHQUFnQjtZQUM1QyxNQUFNLENBQUMsR0FBRyxDQUFDLEtBQUssS0FBSyxXQUFXLEdBQUcsSUFBSSxDQUFDO1FBQzVDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNELE1BQU0sSUFBSSxLQUFLLENBQUMsdUJBQXVCLEdBQUcsSUFBSSxHQUFHLHFCQUFxQixDQUFDLENBQUM7UUFDNUUsQ0FBQztRQUVELElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUcxRCxDQUFDO0lBT08sc0NBQVcsR0FBbkIsVUFBb0IsTUFBbUI7UUFDbkMsRUFBRSxDQUFDLENBQUMsQ0FBQyxNQUFNLElBQUksQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNqQyxNQUFNLElBQUksS0FBSyxDQUFDLGdCQUFnQixDQUFDLENBQUM7UUFDdEMsQ0FBQztRQUVELEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLEtBQUssSUFBSSxJQUFJLE1BQU0sQ0FBQyxLQUFLLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQztZQUMvQyxNQUFNLElBQUksS0FBSyxDQUFDLG9EQUFvRCxDQUFDLENBQUM7UUFDMUUsQ0FBQztRQUVELEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLElBQUksQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDaEQsTUFBTSxJQUFJLEtBQUssQ0FBQywrQkFBK0IsQ0FBQyxDQUFDO1FBQ3JELENBQUM7UUFFRCxFQUFFLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxXQUFXLElBQUksQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDekQsTUFBTSxJQUFJLEtBQUssQ0FBQyxvQ0FBb0MsQ0FBQyxDQUFDO1FBQzFELENBQUM7SUFDTCxDQUFDO0lBRU0sd0NBQWEsR0FBcEIsVUFBc0IsWUFBb0I7UUFDdEMsRUFBRSxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQztZQUNmLElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxHQUFHLFlBQVksQ0FBQztZQUN0QyxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUM7UUFDbEMsQ0FBQztRQUVELE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQztJQUNsQyxDQUFDO0lBRU0sd0NBQWEsR0FBcEIsVUFBcUIsWUFBWTtRQUM3QixFQUFFLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDO1lBQ2YsSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEdBQUcsWUFBWSxDQUFDO1lBQ3RDLElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQztRQUNsQyxDQUFDO1FBRUQsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDO0lBQ2xDLENBQUM7SUFFTSxzQ0FBVyxHQUFsQixVQUFtQixLQUFjO1FBQzdCLEVBQUUsQ0FBQyxDQUFDLEtBQUssS0FBSyxJQUFJLElBQUksS0FBSyxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUM7WUFDeEMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQztRQUNyQyxDQUFDO1FBRUQsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDO0lBQ2xDLENBQUM7SUFFTSwrQkFBSSxHQUFYO1FBQ0ksVUFBVSxDQUFDO1FBRVgsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzFELElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxlQUFlLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ3RELENBQUM7UUFFRCxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQztJQUN6QixDQUFDO0lBQ0wsdUJBQUM7QUFBRCxDQXRIQSxBQXNIQyxJQUFBO0FBRUQsT0FBTztLQUNGLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQztLQUM3QixRQUFRLENBQUMsYUFBYSxFQUFFLGdCQUFnQixDQUFDLENBQUM7O0FDck8vQyxZQUFZLENBQUM7O0FBRWIsT0FBTyxDQUFDLE1BQU0sQ0FBQyxxQkFBcUIsRUFBRSxFQUFFLENBQUMsQ0FBQztBQUUxQyw2QkFBMkI7O0FDSjNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxuaW1wb3J0ICcuL3NldHRpbmdzX3NlcnZpY2UvaW5kZXgnO1xyXG5pbXBvcnQgJy4vc2V0dGluZ3NfcGFnZS9pbmRleCc7XHJcblxyXG5hbmd1bGFyLm1vZHVsZSgncGlwU2V0dGluZ3MnLCBbXHJcbiAgICAncGlwU2V0dGluZ3MuU2VydmljZScsXHJcbiAgICAncGlwU2V0dGluZ3MuUGFnZSdcclxuXSk7XHJcblxyXG5leHBvcnQgKiBmcm9tICcuL3NldHRpbmdzX3NlcnZpY2UnO1xyXG5leHBvcnQgKiBmcm9tICcuL3NldHRpbmdzX3BhZ2UnOyIsIi8vIFByZXZlbnQganVuayBmcm9tIGdvaW5nIGludG8gdHlwZXNjcmlwdCBkZWZpbml0aW9uc1xyXG5cclxuaW1wb3J0IHtJU2V0dGluZ3NTZXJ2aWNlLCBTZXR0aW5nc1RhYn0gZnJvbSAnLi4vc2V0dGluZ3Nfc2VydmljZS9TZXR0aW5nc1NlcnZpY2UnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNldHRpbmdzUGFnZVNlbGVjdGVkVGFiIHtcclxuICAgIHB1YmxpYyB0YWI6IFNldHRpbmdzVGFiO1xyXG4gICAgcHVibGljIHRhYkluZGV4OiBudW1iZXIgPSAwO1xyXG4gICAgcHVibGljIHRhYklkOiBzdHJpbmc7XHJcbn1cclxuXHJcbmludGVyZmFjZSBJU2V0dGluZ3NQYWdlQ29udHJvbGxlciB7XHJcbiAgICB0YWJzOiBTZXR0aW5nc1RhYltdO1xyXG4gICAgc2VsZWN0ZWQ6IFNldHRpbmdzUGFnZVNlbGVjdGVkVGFiO1xyXG4gICAgb25Ecm9wZG93blNlbGVjdDogRnVuY3Rpb247XHJcbiAgICBvbk5hdmlnYXRpb25TZWxlY3Qoc3RhdGU6IHN0cmluZyk6IHZvaWQ7XHJcbn1cclxuXHJcblxyXG5cclxuKCgpID0+IHtcclxuXHJcbiAgICBjbGFzcyBTZXR0aW5nc1BhZ2VDb250cm9sbGVyIGltcGxlbWVudHMgSVNldHRpbmdzUGFnZUNvbnRyb2xsZXIge1xyXG4gICAgcHVibGljIHRhYnM6IFNldHRpbmdzVGFiW107XHJcbiAgICBwdWJsaWMgc2VsZWN0ZWQ6IFNldHRpbmdzUGFnZVNlbGVjdGVkVGFiO1xyXG4gICAgcHVibGljIG9uRHJvcGRvd25TZWxlY3Q6IEZ1bmN0aW9uO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHByaXZhdGUgJHN0YXRlOiBuZy51aS5JU3RhdGVTZXJ2aWNlLFxyXG4gICAgICAgIHBpcE5hdlNlcnZpY2U6IHBpcC5uYXYuSU5hdlNlcnZpY2UsXHJcbiAgICAgICAgcGlwU2V0dGluZ3M6IElTZXR0aW5nc1NlcnZpY2UsXHJcbiAgICAgICAgJHJvb3RTY29wZTogbmcuSVJvb3RTY29wZVNlcnZpY2UsIFxyXG4gICAgICAgICR0aW1lb3V0OiBhbmd1bGFyLklUaW1lb3V0U2VydmljZVxyXG4gICAgKSB7XHJcblxyXG4gICAgICAgIHRoaXMudGFicyA9IF8uZmlsdGVyKHBpcFNldHRpbmdzLmdldFRhYnMoKSwgKHRhYjogU2V0dGluZ3NUYWIpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0YWIudmlzaWJsZSA9PT0gdHJ1ZSAmJiAodGFiLmFjY2VzcyA/IHRhYi5hY2Nlc3MoJHJvb3RTY29wZVsnJHVzZXInXSwgdGFiKSA6IHRydWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhYjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMudGFicyA9IF8uc29ydEJ5KHRoaXMudGFicywgJ2luZGV4Jyk7XHJcblxyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWQgPSBuZXcgU2V0dGluZ3NQYWdlU2VsZWN0ZWRUYWIoKTtcclxuICAgICAgICBpZiAodGhpcy4kc3RhdGUuY3VycmVudC5uYW1lICE9PSAnc2V0dGluZ3MnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5pdFNlbGVjdCh0aGlzLiRzdGF0ZS5jdXJyZW50Lm5hbWUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy4kc3RhdGUuY3VycmVudC5uYW1lID09PSAnc2V0dGluZ3MnICYmIHBpcFNldHRpbmdzLmdldERlZmF1bHRUYWIoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmluaXRTZWxlY3QocGlwU2V0dGluZ3MuZ2V0RGVmYXVsdFRhYigpLnN0YXRlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkdGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAocGlwU2V0dGluZ3MuZ2V0RGVmYXVsdFRhYigpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0U2VsZWN0KHBpcFNldHRpbmdzLmdldERlZmF1bHRUYWIoKS5zdGF0ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIXBpcFNldHRpbmdzLmdldERlZmF1bHRUYWIoKSAmJiB0aGlzLnRhYnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRTZWxlY3QodGhpcy50YWJzWzBdLnN0YXRlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwaXBOYXZTZXJ2aWNlLmljb24uc2hvd01lbnUoKTtcclxuICAgICAgICBwaXBOYXZTZXJ2aWNlLmJyZWFkY3J1bWIudGV4dCA9IFwiU2V0dGluZ3NcIjtcclxuICAgICAgICBwaXBOYXZTZXJ2aWNlLmFjdGlvbnMuaGlkZSgpO1xyXG4gICAgICAgIHBpcE5hdlNlcnZpY2UuYXBwYmFyLnJlbW92ZVNoYWRvdygpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMub25Ecm9wZG93blNlbGVjdCA9IChzdGF0ZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm9uTmF2aWdhdGlvblNlbGVjdChzdGF0ZS5zdGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaW5pdFNlbGVjdChzdGF0ZTogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZC50YWIgPSBfLmZpbmQodGhpcy50YWJzLCAodGFiOiBTZXR0aW5nc1RhYikgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGFiLnN0YXRlID09PSBzdGF0ZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkLnRhYkluZGV4ID0gXy5pbmRleE9mKHRoaXMudGFicywgdGhpcy5zZWxlY3RlZC50YWIpO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWQudGFiSWQgPSBzdGF0ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb25OYXZpZ2F0aW9uU2VsZWN0KHN0YXRlOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmluaXRTZWxlY3Qoc3RhdGUpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZC50YWIpIHtcclxuICAgICAgICAgICAgdGhpcy4kc3RhdGUuZ28oc3RhdGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuYW5ndWxhci5tb2R1bGUoJ3BpcFNldHRpbmdzLlBhZ2UnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ3BpcFNldHRpbmdzUGFnZUNvbnRyb2xsZXInLCBTZXR0aW5nc1BhZ2VDb250cm9sbGVyKTtcclxufSkoKTsiLCIndXNlIHN0cmljdCc7XHJcblxyXG5mdW5jdGlvbiBjb25maWd1cmVTZXR0aW5nc1BhZ2VSb3V0ZXMoJHN0YXRlUHJvdmlkZXIpIHtcclxuICAgICRzdGF0ZVByb3ZpZGVyXHJcbiAgICAgICAgLnN0YXRlKCdzZXR0aW5ncycsIHtcclxuICAgICAgICAgICAgdXJsOiAnL3NldHRpbmdzP3BhcnR5X2lkJyxcclxuICAgICAgICAgICAgYXV0aDogdHJ1ZSxcclxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAncGlwU2V0dGluZ3NQYWdlQ29udHJvbGxlcicsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2V0dGluZ3NfcGFnZS9TZXR0aW5nc1BhZ2UuaHRtbCdcclxuICAgICAgICB9KTtcclxuICAgICAgIFxyXG59XHJcblxyXG5hbmd1bGFyLm1vZHVsZSgncGlwU2V0dGluZ3MuUGFnZScpXHJcbiAgICAuY29uZmlnKGNvbmZpZ3VyZVNldHRpbmdzUGFnZVJvdXRlcyk7XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuXHJcbmFuZ3VsYXIubW9kdWxlKCdwaXBTZXR0aW5ncy5QYWdlJywgW1xyXG4gICAgJ3VpLnJvdXRlcicsIFxyXG4gICAgJ3BpcFNldHRpbmdzLlNlcnZpY2UnLFxyXG4gICAgJ3BpcE5hdicsIFxyXG4gICAgJ3BpcFNlbGVjdGVkJyxcclxuICAgICdwaXBUcmFuc2xhdGUnLFxyXG4gICAgJ3BpcFNldHRpbmdzLlRlbXBsYXRlcydcclxuICAgIF0pO1xyXG5cclxuXHJcbmltcG9ydCAnLi9TZXR0aW5nc1BhZ2VDb250cm9sbGVyJztcclxuaW1wb3J0ICcuL1NldHRpbmdzUGFnZVJvdXRlcyc7IiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNldHRpbmdzVGFiIHtcclxuICAgIHB1YmxpYyBzdGF0ZTogc3RyaW5nO1xyXG4gICAgcHVibGljIHRpdGxlOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgaW5kZXg6IG51bWJlcjtcclxuICAgIHB1YmxpYyBhY2Nlc3M6IEZ1bmN0aW9uO1xyXG4gICAgcHVibGljIHZpc2libGU6IGJvb2xlYW47XHJcbiAgICBwdWJsaWMgc3RhdGVDb25maWc6IFNldHRpbmdzU3RhdGVDb25maWc7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBTZXR0aW5nc1N0YXRlQ29uZmlnIHtcclxuICAgIHB1YmxpYyB1cmw6IHN0cmluZztcclxuICAgIHB1YmxpYyBhdXRoOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwdWJsaWMgdGVtcGxhdGVVcmw/OiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgdGVtcGxhdGU/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVNldHRpbmdzU2VydmljZSB7XHJcbiAgICBnZXREZWZhdWx0VGFiKCk6IFNldHRpbmdzVGFiO1xyXG4gICAgc2hvd1RpdGxlVGV4dCAobmV3VGl0bGVUZXh0OiBzdHJpbmcpOiB2b2lkO1xyXG4gICAgc2hvd1RpdGxlTG9nbyhuZXdUaXRsZUxvZ28pO1xyXG4gICAgc2V0RGVmYXVsdFRhYihuYW1lOiBzdHJpbmcpOiB2b2lkO1xyXG4gICAgc2hvd05hdkljb24odmFsdWU6IGJvb2xlYW4pOiBib29sZWFuO1xyXG4gICAgZ2V0VGFicygpOiBTZXR0aW5nc1RhYltdO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElTZXR0aW5nc1Byb3ZpZGVyIGV4dGVuZHMgbmcuSVNlcnZpY2VQcm92aWRlciB7XHJcbiAgICBnZXREZWZhdWx0VGFiKCk6IFNldHRpbmdzVGFiO1xyXG4gICAgYWRkVGFiKHRhYk9iajogU2V0dGluZ3NUYWIpOiB2b2lkO1xyXG4gICAgc2V0RGVmYXVsdFRhYihuYW1lOiBzdHJpbmcpOiB2b2lkO1xyXG4gICAgZ2V0RnVsbFN0YXRlTmFtZShzdGF0ZTogc3RyaW5nKTogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgU2V0dGluZ3NDb25maWcge1xyXG5cclxuICAgIHB1YmxpYyBkZWZhdWx0VGFiOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgdGFiczogU2V0dGluZ3NUYWJbXSA9IFtdO1xyXG4gICAgcHVibGljIHRpdGxlVGV4dDogc3RyaW5nID0gJ1NFVFRJTkdTX1RJVExFJztcclxuICAgIHB1YmxpYyB0aXRsZUxvZ286IGJvb2xlYW4gPSBudWxsO1xyXG4gICAgcHVibGljIGlzTmF2SWNvbjogYm9vbGVhbiA9IHRydWU7XHJcblxyXG59XHJcblxyXG5jbGFzcyBTZXR0aW5nc1NlcnZpY2UgaW1wbGVtZW50cyBJU2V0dGluZ3NTZXJ2aWNlIHtcclxuICAgIHByaXZhdGUgX2NvbmZpZzogU2V0dGluZ3NDb25maWc7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKGNvbmZpZzogU2V0dGluZ3NDb25maWcpIHtcclxuICAgICAgICBcIm5nSW5qZWN0XCI7XHJcbiAgICAgICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0RnVsbFN0YXRlTmFtZShzdGF0ZTogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gJ3NldHRpbmdzLicgKyBzdGF0ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0RGVmYXVsdFRhYihuYW1lOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICBpZiAoIV8uZmluZCh0aGlzLl9jb25maWcudGFicywgKHRhYjogU2V0dGluZ3NUYWIpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRhYi5zdGF0ZSA9PT0gJ3NldHRpbmdzLicgKyBuYW1lO1xyXG4gICAgICAgIH0pKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGFiIHdpdGggc3RhdGUgbmFtZSBcIicgKyBuYW1lICsgJ1wiIGlzIG5vdCByZWdpc3RlcmVkJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9jb25maWcuZGVmYXVsdFRhYiA9IHRoaXMuZ2V0RnVsbFN0YXRlTmFtZShuYW1lKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0RGVmYXVsdFRhYigpOiBTZXR0aW5nc1RhYiB7XHJcbiAgICAgICAgbGV0IGRlZmF1bHRUYWI6IFNldHRpbmdzVGFiO1xyXG5cclxuICAgICAgICBkZWZhdWx0VGFiID0gXy5maW5kKHRoaXMuX2NvbmZpZy50YWJzLCAodGFiOiBTZXR0aW5nc1RhYikgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGFiLnN0YXRlID09PSBkZWZhdWx0VGFiLnN0YXRlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBfLmNsb25lRGVlcChkZWZhdWx0VGFiKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2hvd1RpdGxlVGV4dCAobmV3VGl0bGVUZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIGlmIChuZXdUaXRsZVRleHQpIHtcclxuICAgICAgICAgICAgdGhpcy5fY29uZmlnLnRpdGxlVGV4dCA9IG5ld1RpdGxlVGV4dDtcclxuICAgICAgICAgICAgdGhpcy5fY29uZmlnLnRpdGxlTG9nbyA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5fY29uZmlnLnRpdGxlVGV4dDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2hvd1RpdGxlTG9nbyhuZXdUaXRsZUxvZ28pIHtcclxuICAgICAgICBpZiAobmV3VGl0bGVMb2dvKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbmZpZy50aXRsZUxvZ28gPSBuZXdUaXRsZUxvZ287XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbmZpZy50aXRsZVRleHQgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbmZpZy50aXRsZUxvZ287XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNob3dOYXZJY29uKHZhbHVlOiBib29sZWFuKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKHZhbHVlICE9PSBudWxsICYmIHZhbHVlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5fY29uZmlnLmlzTmF2SWNvbiA9ICEhdmFsdWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5fY29uZmlnLmlzTmF2SWNvbjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0VGFicygpOiBTZXR0aW5nc1RhYltdIHtcclxuICAgICAgICByZXR1cm4gXy5jbG9uZURlZXAodGhpcy5fY29uZmlnLnRhYnMpO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuY2xhc3MgU2V0dGluZ3NQcm92aWRlciBpbXBsZW1lbnRzIElTZXR0aW5nc1Byb3ZpZGVyIHtcclxuICAgIHByaXZhdGUgX3NlcnZpY2U6IFNldHRpbmdzU2VydmljZTtcclxuICAgIHByaXZhdGUgX2NvbmZpZzogU2V0dGluZ3NDb25maWcgPSBuZXcgU2V0dGluZ3NDb25maWcoKTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlICRzdGF0ZVByb3ZpZGVyOiBuZy51aS5JU3RhdGVQcm92aWRlcikge31cclxuXHJcbiAgICBwdWJsaWMgZ2V0RnVsbFN0YXRlTmFtZShzdGF0ZTogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gJ3NldHRpbmdzLicgKyBzdGF0ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0RGVmYXVsdFRhYigpOiBTZXR0aW5nc1RhYiB7XHJcbiAgICAgICAgbGV0IGRlZmF1bHRUYWI6IFNldHRpbmdzVGFiO1xyXG5cclxuICAgICAgICBkZWZhdWx0VGFiID0gXy5maW5kKHRoaXMuX2NvbmZpZy50YWJzLCAodGFiOiBTZXR0aW5nc1RhYikgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGFiLnN0YXRlID09PSBkZWZhdWx0VGFiLnN0YXRlO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gXy5jbG9uZURlZXAoZGVmYXVsdFRhYik7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFkZFRhYih0YWJPYmo6IFNldHRpbmdzVGFiKTogdm9pZCB7XHJcbiAgICAgICAgbGV0IGV4aXN0aW5nVGFiOiBTZXR0aW5nc1RhYjtcclxuXHJcbiAgICAgICAgdGhpcy52YWxpZGF0ZVRhYih0YWJPYmopO1xyXG4gICAgICAgIGV4aXN0aW5nVGFiID0gXy5maW5kKHRoaXMuX2NvbmZpZy50YWJzLCAodGFiOiBTZXR0aW5nc1RhYikgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGFiLnN0YXRlID09PSAnc2V0dGluZ3MuJyArIHRhYk9iai5zdGF0ZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAoZXhpc3RpbmdUYWIpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUYWIgd2l0aCBzdGF0ZSBuYW1lIFwiJyArIHRhYk9iai5zdGF0ZSArICdcIiBpcyBhbHJlYWR5IHJlZ2lzdGVyZWQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2NvbmZpZy50YWJzLnB1c2goe1xyXG4gICAgICAgICAgICBzdGF0ZTogdGhpcy5nZXRGdWxsU3RhdGVOYW1lKHRhYk9iai5zdGF0ZSksXHJcbiAgICAgICAgICAgIHRpdGxlOiB0YWJPYmoudGl0bGUsXHJcbiAgICAgICAgICAgIGluZGV4OiB0YWJPYmouaW5kZXggfHwgMTAwMDAwLFxyXG4gICAgICAgICAgICBhY2Nlc3M6IHRhYk9iai5hY2Nlc3MsXHJcbiAgICAgICAgICAgIHZpc2libGU6IHRhYk9iai52aXNpYmxlICE9PSBmYWxzZSxcclxuICAgICAgICAgICAgc3RhdGVDb25maWc6IF8uY2xvbmVEZWVwKHRhYk9iai5zdGF0ZUNvbmZpZylcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLiRzdGF0ZVByb3ZpZGVyLnN0YXRlKHRoaXMuZ2V0RnVsbFN0YXRlTmFtZSh0YWJPYmouc3RhdGUpLCB0YWJPYmouc3RhdGVDb25maWcpO1xyXG5cclxuICAgICAgICAvLyBpZiB3ZSBqdXN0IGFkZGVkIGZpcnN0IHN0YXRlIGFuZCBubyBkZWZhdWx0IHN0YXRlIGlzIHNwZWNpZmllZFxyXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5fY29uZmlnLmRlZmF1bHRUYWIgPT09ICd1bmRlZmluZWQnICYmIHRoaXMuX2NvbmZpZy50YWJzLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldERlZmF1bHRUYWIodGFiT2JqLnN0YXRlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldERlZmF1bHRUYWIobmFtZTogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgLy8gVE9ETyBbYXBpZGhpcm55aV0gZXh0cmFjdCBleHByZXNzaW9uIGluc2lkZSAnaWYnIGludG8gdmFyaWFibGUuIEl0IGlzbid0IHJlYWRhYmxlIG5vdy5cclxuICAgICAgICBpZiAoIV8uZmluZCh0aGlzLl9jb25maWcudGFicywgKHRhYjogU2V0dGluZ3NUYWIpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRhYi5zdGF0ZSA9PT0gJ3NldHRpbmdzLicgKyBuYW1lO1xyXG4gICAgICAgIH0pKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGFiIHdpdGggc3RhdGUgbmFtZSBcIicgKyBuYW1lICsgJ1wiIGlzIG5vdCByZWdpc3RlcmVkJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9jb25maWcuZGVmYXVsdFRhYiA9IHRoaXMuZ2V0RnVsbFN0YXRlTmFtZShuYW1lKTtcclxuICAgICAgICAvL3RoaXMuJHN0YXRlUHJvdmlkZXIuZ28odGhpcy5fY29uZmlnLmRlZmF1bHRUYWIpO1xyXG4gICAgICAgICAgICAvL3BpcEF1dGhTdGF0ZVByb3ZpZGVyLnJlZGlyZWN0KCdzZXR0aW5ncycsIGdldEZ1bGxTdGF0ZU5hbWUobmFtZSkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVmFsaWRhdGVzIHBhc3NlZCB0YWIgY29uZmlnIG9iamVjdFxyXG4gICAgICogSWYgcGFzc2VkIHRhYiBpcyBub3QgdmFsaWQgaXQgd2lsbCB0aHJvdyBhbiBlcnJvclxyXG4gICAgICovXHJcblxyXG4gICAgcHJpdmF0ZSB2YWxpZGF0ZVRhYih0YWJPYmo6IFNldHRpbmdzVGFiKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCF0YWJPYmogfHwgIV8uaXNPYmplY3QodGFiT2JqKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgb2JqZWN0Jyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGFiT2JqLnN0YXRlID09PSBudWxsIHx8IHRhYk9iai5zdGF0ZSA9PT0gJycpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUYWIgc2hvdWxkIGhhdmUgdmFsaWQgQW5ndWxhciBVSSByb3V0ZXIgc3RhdGUgbmFtZScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRhYk9iai5hY2Nlc3MgJiYgIV8uaXNGdW5jdGlvbih0YWJPYmouYWNjZXNzKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1wiYWNjZXNzXCIgc2hvdWxkIGJlIGEgZnVuY3Rpb24nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghdGFiT2JqLnN0YXRlQ29uZmlnIHx8ICFfLmlzT2JqZWN0KHRhYk9iai5zdGF0ZUNvbmZpZykpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHN0YXRlIGNvbmZpZ3VyYXRpb24gb2JqZWN0Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzaG93VGl0bGVUZXh0IChuZXdUaXRsZVRleHQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKG5ld1RpdGxlVGV4dCkge1xyXG4gICAgICAgICAgICB0aGlzLl9jb25maWcudGl0bGVUZXh0ID0gbmV3VGl0bGVUZXh0O1xyXG4gICAgICAgICAgICB0aGlzLl9jb25maWcudGl0bGVMb2dvID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl9jb25maWcudGl0bGVUZXh0O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzaG93VGl0bGVMb2dvKG5ld1RpdGxlTG9nbykge1xyXG4gICAgICAgIGlmIChuZXdUaXRsZUxvZ28pIHtcclxuICAgICAgICAgICAgdGhpcy5fY29uZmlnLnRpdGxlTG9nbyA9IG5ld1RpdGxlTG9nbztcclxuICAgICAgICAgICAgdGhpcy5fY29uZmlnLnRpdGxlVGV4dCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5fY29uZmlnLnRpdGxlTG9nbztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2hvd05hdkljb24odmFsdWU6IGJvb2xlYW4pOiBib29sZWFuIHtcclxuICAgICAgICBpZiAodmFsdWUgIT09IG51bGwgJiYgdmFsdWUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9jb25maWcuaXNOYXZJY29uID0gISF2YWx1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl9jb25maWcuaXNOYXZJY29uO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyAkZ2V0KCk6IElTZXR0aW5nc1NlcnZpY2Uge1xyXG4gICAgICAgIFwibmdJbmplY3RcIjtcclxuXHJcbiAgICAgICAgaWYgKF8uaXNOdWxsKHRoaXMuX3NlcnZpY2UpIHx8IF8uaXNVbmRlZmluZWQodGhpcy5fc2VydmljZSkpIHtcclxuICAgICAgICAgICAgdGhpcy5fc2VydmljZSA9IG5ldyBTZXR0aW5nc1NlcnZpY2UodGhpcy5fY29uZmlnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlcnZpY2U7XHJcbiAgICB9XHJcbn1cclxuXHJcbmFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ3BpcFNldHRpbmdzLlNlcnZpY2UnKVxyXG4gICAgLnByb3ZpZGVyKCdwaXBTZXR0aW5ncycsIFNldHRpbmdzUHJvdmlkZXIpO1xyXG5cclxuIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxuYW5ndWxhci5tb2R1bGUoJ3BpcFNldHRpbmdzLlNlcnZpY2UnLCBbXSk7XHJcblxyXG5pbXBvcnQgJy4vU2V0dGluZ3NTZXJ2aWNlJzsiLCIoZnVuY3Rpb24obW9kdWxlKSB7XG50cnkge1xuICBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgncGlwU2V0dGluZ3MuVGVtcGxhdGVzJyk7XG59IGNhdGNoIChlKSB7XG4gIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdwaXBTZXR0aW5ncy5UZW1wbGF0ZXMnLCBbXSk7XG59XG5tb2R1bGUucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ3NldHRpbmdzX3BhZ2UvU2V0dGluZ3NQYWdlLmh0bWwnLFxuICAgICc8bWQtdG9vbGJhciBjbGFzcz1cInBpcC1hcHBiYXItZXh0XCI+PC9tZC10b29sYmFyPjxwaXAtZG9jdW1lbnQgd2lkdGg9XCI4MDBcIiBtaW4taGVpZ2h0PVwiNDAwXCIgY2xhc3M9XCJwaXAtc2V0dGluZ3NcIj48ZGl2IGNsYXNzPVwicGlwLW1lbnUtY29udGFpbmVyXCIgbmctaGlkZT1cInZtLm1hbmFnZXIgPT09IGZhbHNlIHx8ICF2bS50YWJzIHx8IHZtLnRhYnMubGVuZ3RoIDwgMVwiPjxtZC1saXN0IGNsYXNzPVwicGlwLW1lbnUgcGlwLXNpbXBsZS1saXN0XCIgcGlwLXNlbGVjdGVkPVwidm0uc2VsZWN0ZWQudGFiSW5kZXhcIiBwaXAtc2VsZWN0ZWQtd2F0Y2g9XCJ2bS5zZWxlY3RlZC5uYXZJZFwiIHBpcC1zZWxlY3Q9XCJ2bS5vbk5hdmlnYXRpb25TZWxlY3QoJGV2ZW50LmlkKVwiPjxtZC1saXN0LWl0ZW0gY2xhc3M9XCJwaXAtc2ltcGxlLWxpc3QtaXRlbSBwaXAtc2VsZWN0YWJsZSBmbGV4XCIgbmctcmVwZWF0PVwidGFiIGluIHZtLnRhYnMgdHJhY2sgYnkgdGFiLnN0YXRlXCIgbmctaWY9XCJ2bS4kcGFydHkuaWQgPT0gdm0uJHVzZXIuaWQgfHwgdGFiLnN0YXRlID09IFxcJ3NldHRpbmdzLmJhc2ljX2luZm9cXCd8fCB0YWIuc3RhdGUgPT1cXCdzZXR0aW5ncy5jb250YWN0X2luZm9cXCcgfHwgdGFiLnN0YXRlID09XFwnc2V0dGluZ3MuYmxhY2tsaXN0XFwnXCIgbWQtaW5rLXJpcHBsZT1cIlwiIHBpcC1pZD1cInt7OjogdGFiLnN0YXRlIH19XCI+PHA+e3s6OnRhYi50aXRsZSB8IHRyYW5zbGF0ZX19PC9wPjwvbWQtbGlzdC1pdGVtPjwvbWQtbGlzdD48ZGl2IGNsYXNzPVwicGlwLWNvbnRlbnQtY29udGFpbmVyXCI+PHBpcC1kcm9wZG93biBwaXAtYWN0aW9ucz1cInZtLnRhYnNcIiBwaXAtZHJvcGRvd24tc2VsZWN0PVwidm0ub25Ecm9wZG93blNlbGVjdFwiIHBpcC1hY3RpdmUtaW5kZXg9XCJ2bS5zZWxlY3RlZC50YWJJbmRleFwiPjwvcGlwLWRyb3Bkb3duPjxkaXYgY2xhc3M9XCJwaXAtYm9keSB0cDI0LWZsZXggbGF5b3V0LWNvbHVtblwiIHVpLXZpZXc9XCJcIj48L2Rpdj48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPVwibGF5b3V0LWNvbHVtbiBsYXlvdXQtYWxpZ24tY2VudGVyLWNlbnRlciBmbGV4XCIgbmctc2hvdz1cInZtLm1hbmFnZXIgPT09IGZhbHNlIHx8ICF2bS50YWJzIHx8IHZtLnRhYnMubGVuZ3RoIDwgMVwiPnt7OjpcXCdFUlJPUl80MDBcXCcgfCB0cmFuc2xhdGV9fTwvZGl2PjwvcGlwLWRvY3VtZW50PicpO1xufV0pO1xufSkoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGlwLXdlYnVpLXNldHRpbmdzLWh0bWwubWluLmpzLm1hcFxuIl19"}