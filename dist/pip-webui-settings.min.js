!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(e.pip||(e.pip={})).settings=t()}}(function(){return function t(e,i,n){function s(o,r){if(!i[o]){if(!e[o]){var c="function"==typeof require&&require;if(!r&&c)return c(o,!0);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var p=i[o]={exports:{}};e[o][0].call(p.exports,function(t){var i=e[o][1][t];return s(i||t)},p,p.exports,t,e,i,n)}return i[o].exports}for(var a="function"==typeof require&&require,o=0;o<n.length;o++)s(n[o]);return s}({1:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),t("./service"),t("./page"),angular.module("pipSettings",["pipSettings.Service","pipSettings.Page"]),function(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}(t("./service"))},{"./page":4,"./service":11}],2:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("../service/SettingsPageSelectedTab"),s=function(){function t(t,e,i,n,s,a,o,r,c){var l=this;this.$state=t,this.$rootScope=e,this.$injector=n,this.$timeout=s,this.$location=a,this.pipNavService=o,this.pipSettings=r,this.pipMedia=c,this.translateInit(),this.mediaSizeGtSm=this.pipMedia("gt-sm"),this.initTabs(),this.pipMedia("gt-sm")?(this.details=!1,this.$location.search("details","main")):this.details="details"==a.search().details,this.cleanUpSelectFunc=e.$on("$stateChangeSuccess",function(){var t=l.$state.current.name;l.initSelect(t,!1)}),this.cleanUpFunc=e.$on("pipMainResized",function(){l.mediaSizeGtSm!==l.pipMedia("gt-sm")&&(l.mediaSizeGtSm=l.pipMedia("gt-sm"),l.pipMedia("gt-sm")&&(l.details=!1),l.appHeader())}),this.appHeader(),i.$on("$destroy",function(){angular.isFunction(l.cleanUpFunc)&&l.cleanUpFunc(),angular.isFunction(l.cleanUpSelectFunc)&&l.cleanUpSelectFunc()})}return t.$inject=["$state","$rootScope","$scope","$injector","$timeout","$location","pipNavService","pipSettings","pipMedia"],t.prototype.initTabs=function(){var t=this;this.tabs=_.filter(this.pipSettings.getTabs(),function(e){if(!0===e.visible&&(!e.access||e.access(t.$rootScope.$user,e)))return e}),this.tabs=_.sortBy(this.tabs,"index"),this.selected=new n.SettingsPageSelectedTab,"settings"!==this.$state.current.name?this.initSelect(this.$state.current.name):"settings"===this.$state.current.name&&this.pipSettings.getDefaultTab()?this.initSelect(this.pipSettings.getDefaultTab().state):this.$timeout(function(){t.pipSettings.getDefaultTab()&&t.initSelect(t.pipSettings.getDefaultTab().state),!t.pipSettings.getDefaultTab()&&t.tabs.length>0&&t.initSelect(t.tabs[0].state)})},t.prototype.translateInit=function(){this._pipTranslate=this.$injector.has("pipTranslate")?this.$injector.get("pipTranslate"):null,this._pipTranslate&&this._pipTranslate.setTranslations&&(this._pipTranslate.setTranslations("en",{PIP_SETTINGS:"Settings",PIP_SETTINGS_DETAILS:"Settings details"}),this._pipTranslate.setTranslations("ru",{PIP_SETTINGS:"Настройки",PIP_SETTINGS_DETAILS:"Подробно"}))},t.prototype.toMainFromDetails=function(){this.$location.search("details","main"),this.details=!1,this.appHeader()},t.prototype.appHeader=function(){var t=this;if(this.pipNavService.breadcrumb.breakpoint="gt-sm",this.pipMedia("gt-sm"))this.pipNavService.icon.showMenu(),this.pipNavService.breadcrumb.text="PIP_SETTINGS";else{var e=this.selected&&this.selected.tab?this.selected.tab.title:"PIP_SETTINGS_DETAILS";this.details?(this.pipNavService.icon.showBack(function(){t.toMainFromDetails()}),this.pipNavService.breadcrumb.items=[{title:"PIP_SETTINGS",click:function(){t.toMainFromDetails()}},{title:e,click:function(){},subActions:[]}]):(this.pipNavService.icon.showMenu(),this.pipNavService.breadcrumb.text="PIP_SETTINGS")}this.pipNavService.actions.hide(),this.pipNavService.appbar.removeShadow()},t.prototype.initSelect=function(t,e){void 0===e&&(e=!0),this.selected.tab=_.find(this.tabs,function(e){return e.state===t}),this.selected.tabIndex=_.indexOf(this.tabs,this.selected.tab),this.selected.tabId=t,!0===e&&this.$state.go(this.selected.tabId)},t.prototype.onNavigationSelect=function(t){this.initSelect(t),this.pipMedia("gt-sm")||(this.details=!0,this.$location.search("details","details"),this.appHeader())},t}();angular.module("pipSettings.Page").controller("pipSettingsPageController",s)},{"../service/SettingsPageSelectedTab":7}],3:[function(t,e,i){function n(t){t.state("settings",{url:"/settings?user_id&details",auth:!0,controllerAs:"vm",controller:"pipSettingsPageController",templateUrl:"page/SettingsPage.html"})}n.$inject=["$stateProvider"],angular.module("pipSettings.Page").config(n)},{}],4:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),angular.module("pipSettings.Page",["ui.router","pipSettings.Service","pipNav","pipSelected","pipTranslate","pipSettings.Templates"]),t("./SettingsPage"),t("./SettingsPageRoutes")},{"./SettingsPage":2,"./SettingsPageRoutes":3}],5:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0})},{}],6:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){this.tabs=[],this.titleText="SETTINGS_TITLE",this.titleLogo=null,this.isNavIcon=!0}return t}();i.SettingsConfig=n},{}],7:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){this.tabIndex=0}return t}();i.SettingsPageSelectedTab=n},{}],8:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("./SettingsConfig"),s=function(){function t(t){"ngInject";this._config=t}return t.$inject=["config"],t.prototype.getFullStateName=function(t){return"settings."+t},t.prototype.setDefaultTab=function(t){if(!_.find(this._config.tabs,function(e){return e.state==="settings."+t}))throw new Error('Tab with state name "'+t+'" is not registered');this._config.defaultTab=this.getFullStateName(t)},t.prototype.getDefaultTab=function(){var t,e=this;return t=_.find(this._config.tabs,function(t){return t.state===e._config.defaultTab}),_.cloneDeep(t)},t.prototype.showTitleText=function(t){return t&&(this._config.titleText=t,this._config.titleLogo=null),this._config.titleText},t.prototype.showTitleLogo=function(t){return t&&(this._config.titleLogo=t,this._config.titleText=null),this._config.titleLogo},t.prototype.showNavIcon=function(t){return null!==t&&void 0!==t&&(this._config.isNavIcon=!!t),this._config.isNavIcon},t.prototype.getTabs=function(){return _.cloneDeep(this._config.tabs)},t}(),a=function(){function t(t){"ngInject";this._config=new n.SettingsConfig,this._stateProvider=t}return t.$inject=["$stateProvider"],Object.defineProperty(t.prototype,"stateProvider",{get:function(){return this._stateProvider},set:function(t){this._stateProvider=t},enumerable:!0,configurable:!0}),t.prototype.getFullStateName=function(t){return"settings."+t},t.prototype.getDefaultTab=function(){var t;return t=_.find(this._config.tabs,function(e){return e.state===t.state}),_.cloneDeep(t)},t.prototype.addTab=function(t){if(this.validateTab(t),_.find(this._config.tabs,function(e){return e.state==="settings."+t.state}))throw new Error('Tab with state name "'+t.state+'" is already registered');this._config.tabs.push({state:this.getFullStateName(t.state),title:t.title,icon:t.icon,iconClass:t.iconClass,index:t.index||1e5,access:t.access,visible:!1!==t.visible,stateConfig:_.cloneDeep(t.stateConfig)}),this._stateProvider.state(this.getFullStateName(t.state),t.stateConfig),void 0===this._config.defaultTab&&1===this._config.tabs.length&&this.setDefaultTab(t.state)},t.prototype.setDefaultTab=function(t){if(!_.find(this._config.tabs,function(e){return e.state==="settings."+t}))throw new Error('Tab with state name "'+t+'" is not registered');this._config.defaultTab=this.getFullStateName(t)},t.prototype.validateTab=function(t){if(!t||!_.isObject(t))throw new Error("Invalid object");if(null===t.state||""===t.state)throw new Error("Tab should have valid Angular UI router state name");if(t.access&&!_.isFunction(t.access))throw new Error('"access" should be a function');if(!t.stateConfig||!_.isObject(t.stateConfig))throw new Error("Invalid state configuration object")},t.prototype.showTitleText=function(t){return t&&(this._config.titleText=t,this._config.titleLogo=null),this._config.titleText},t.prototype.showTitleLogo=function(t){return t&&(this._config.titleLogo=t,this._config.titleText=null),this._config.titleLogo},t.prototype.showNavIcon=function(t){return null!==t&&void 0!==t&&(this._config.isNavIcon=!!t),this._config.isNavIcon},t.prototype.$get=function(){"ngInject";return(_.isNull(this._service)||_.isUndefined(this._service))&&(this._service=new s(this._config)),this._service},t}();angular.module("pipSettings.Service",["ui.router"]).provider("pipSettings",a)},{"./SettingsConfig":6}],9:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){this.auth=!1}return t}();i.SettingsStateConfig=n},{}],10:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){}return t}();i.SettingsTab=n},{}],11:[function(t,e,i){"use strict";function n(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}Object.defineProperty(i,"__esModule",{value:!0}),t("./SettingsConfig"),t("./SettingsPageSelectedTab"),t("./SettingsStateConfig"),t("./SettingsTab"),t("./SettingsService"),n(t("./SettingsConfig")),n(t("./SettingsPageSelectedTab")),n(t("./SettingsStateConfig")),n(t("./SettingsTab"))},{"./SettingsConfig":6,"./SettingsPageSelectedTab":7,"./SettingsService":8,"./SettingsStateConfig":9,"./SettingsTab":10}],12:[function(t,e,i){!function(t){try{t=angular.module("pipSettings.Templates")}catch(e){t=angular.module("pipSettings.Templates",[])}t.run(["$templateCache",function(t){t.put("page/SettingsPage.html",'<div class="pip-main-menu pip-settings" ng-class="{\'pip-single-content\': vm.details}"><div class="pip-menu"><div class="pip-list-container pip-scroll divider-top"><md-list class="pip-ref-list tp0 pip-settings-list" pip-selected="vm.selected.tabIndex" pip-selected-watch="vm.selected.navId" pip-select="vm.onNavigationSelect($event.id)"><md-list-item class="pip-ref-list-item pointer divider-bottom pip-selectable" ng-repeat="tab in vm.tabs track by tab.state" pip-id="{{:: tab.state }}" md-ink-ripple=""><div ng-click="vm.onNavigationSelect(tab.state)" class="layout-row layout-align-start-center flex"><div class="pip-settings-icon layout-row layout-align-start-center {{ tab.iconClass ? tab.iconClass : \'pip-settings-icon-color\'}}" ng-if="tab.icon"><md-icon class="" md-svg-icon="{{ tab.icon }}"></md-icon></div><div class="pip-content {{ tab.icon ? \'\' : \'pip-settings-without-icon\' }}"><p class="pip-title text-overflow flex">{{ ::tab.title | translate }}</p></div><div class="pip-ref-list-item-end-icon"><md-icon class="" md-svg-icon="icons:chevron-right"></md-icon></div></div></md-list-item></md-list></div></div><div class="pip-content-container"><pip-document><div class="pip-body tp24-flex layout-column flex" ui-view=""></div></pip-document></div></div>')}])}()},{}]},{},[12,1,4,2,3,11,5,6,7,8,9,10])(12)});
//# sourceMappingURL=pip-webui-settings.min.js.map
